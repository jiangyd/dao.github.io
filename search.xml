<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>vim 批量在行首插入内容与删除内容</title>
      <link href="/2018/09/06/vim-%E6%89%B9%E9%87%8F%E5%9C%A8%E8%A1%8C%E9%A6%96%E6%8F%92%E5%85%A5%E5%86%85%E5%AE%B9%E4%B8%8E%E5%88%A0%E9%99%A4%E5%86%85%E5%AE%B9/"/>
      <url>/2018/09/06/vim-%E6%89%B9%E9%87%8F%E5%9C%A8%E8%A1%8C%E9%A6%96%E6%8F%92%E5%85%A5%E5%86%85%E5%AE%B9%E4%B8%8E%E5%88%A0%E9%99%A4%E5%86%85%E5%AE%B9/</url>
      <content type="html"><![CDATA[<h2 id="批量在文件每行首字母中，插入内容"><a href="#批量在文件每行首字母中，插入内容" class="headerlink" title="批量在文件每行首字母中，插入内容"></a>批量在文件每行首字母中，插入内容</h2><img src="/2018/09/06/vim-批量在行首插入内容与删除内容/control_v.png" title="vim编辑文件按control+v"><h4 id="按上下键选中行"><a href="#按上下键选中行" class="headerlink" title="按上下键选中行"></a>按上下键选中行</h4><img src="/2018/09/06/vim-批量在行首插入内容与删除内容/up_down.png" title="按上下键选中行"><h4 id="按大写的I-进入插入模式"><a href="#按大写的I-进入插入模式" class="headerlink" title="按大写的I,进入插入模式"></a>按大写的I,进入插入模式</h4><img src="/2018/09/06/vim-批量在行首插入内容与删除内容/insert.png" title="按大写的I,进入插入模式"><h4 id="输入需要添加的内容"><a href="#输入需要添加的内容" class="headerlink" title="输入需要添加的内容"></a>输入需要添加的内容</h4><img src="/2018/09/06/vim-批量在行首插入内容与删除内容/insert_value.png" title="输入需要添加的内容"><h4 id="按两下esc键-内容就增加好了"><a href="#按两下esc键-内容就增加好了" class="headerlink" title="按两下esc键,内容就增加好了"></a>按两下esc键,内容就增加好了</h4><img src="/2018/09/06/vim-批量在行首插入内容与删除内容/esc.png" title="按两下esc键"><h2 id="批量在文件每行首字母中，删除内容"><a href="#批量在文件每行首字母中，删除内容" class="headerlink" title="批量在文件每行首字母中，删除内容"></a>批量在文件每行首字母中，删除内容</h2><img src="/2018/09/06/vim-批量在行首插入内容与删除内容/control_v_d.png" title="vim编辑文件按control+v"><h4 id="按上下左右键选中行与列"><a href="#按上下左右键选中行与列" class="headerlink" title="按上下左右键选中行与列"></a>按上下左右键选中行与列</h4><img src="/2018/09/06/vim-批量在行首插入内容与删除内容/up_left.png" title="按上下左右键选中行与列"><h4 id="按字母d-删除选中内容"><a href="#按字母d-删除选中内容" class="headerlink" title="按字母d,删除选中内容"></a>按字母d,删除选中内容</h4><img src="/2018/09/06/vim-批量在行首插入内容与删除内容/d.png" title="按字母d,删除选中内容">]]></content>
      
      
        <tags>
            
            <tag> vim </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>rm -rf 删除太多文件失败问题</title>
      <link href="/2018/08/13/rm-rf-%E5%88%A0%E9%99%A4%E5%A4%AA%E5%A4%9A%E6%96%87%E4%BB%B6%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/"/>
      <url>/2018/08/13/rm-rf-%E5%88%A0%E9%99%A4%E5%A4%AA%E5%A4%9A%E6%96%87%E4%BB%B6%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<h3 id="某目录下有10多万个小文件，rm-无法删除"><a href="#某目录下有10多万个小文件，rm-无法删除" class="headerlink" title="某目录下有10多万个小文件，rm 无法删除"></a>某目录下有10多万个小文件，rm 无法删除</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@3ac80f67141a:/autotest/test/reports/allure-results# ls -l|wc -l</span><br><span class="line">136043</span><br><span class="line">root@3ac80f67141a:/autotest/test/reports/allure-results# rm -rf *</span><br><span class="line">bash: /bin/rm: Argument list too long</span><br></pre></td></tr></table></figure><h3 id="解决方法，文件一个一个删除-一定要注意当前路径"><a href="#解决方法，文件一个一个删除-一定要注意当前路径" class="headerlink" title="解决方法，文件一个一个删除,一定要注意当前路径"></a>解决方法，文件一个一个删除,一定要注意当前路径</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@3ac80f67141a:~# cd /autotest/test/reports/allure-results/</span><br><span class="line">root@3ac80f67141a:/autotest/test/reports/allure-results# ls -l|awk &apos;&#123;print &quot;rm -rf &quot;,$9&#125;&apos;|sh</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> rm </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>nginx root 与 alias</title>
      <link href="/2018/08/09/nginx-root-%E4%B8%8E-alias/"/>
      <url>/2018/08/09/nginx-root-%E4%B8%8E-alias/</url>
      <content type="html"><![CDATA[]]></content>
      
      <categories>
          
          <category> nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> root </tag>
            
            <tag> alias </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>通过docker启动redis</title>
      <link href="/2018/06/21/%E9%80%9A%E8%BF%87docker%E5%90%AF%E5%8A%A8redis/"/>
      <url>/2018/06/21/%E9%80%9A%E8%BF%87docker%E5%90%AF%E5%8A%A8redis/</url>
      <content type="html"><![CDATA[<blockquote><p>通过docker启动redis,并设置认证密码</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name some-redis -d redis --requirepass &quot;123456&quot;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># redis-cli</span><br><span class="line">127.0.0.1:6379&gt; select 1</span><br><span class="line">(error) NOAUTH Authentication required.</span><br><span class="line">127.0.0.1:6379&gt; AUTH 123456</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; select 1</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[1]&gt;</span><br></pre></td></tr></table></figure><blockquote><p>通过docker启动redis,并把数据挂载到宿主机磁盘</p></blockquote><p>docker run –name my-redis -v /Users/jiangyd/myredis:/data -d redis-cli</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># redis-cli</span><br><span class="line">127.0.0.1:6379&gt; set name jyd</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; get name</span><br><span class="line">&quot;jyd&quot;</span><br><span class="line">127.0.0.1:6379&gt; select 1</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[1]&gt; set name lj</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[1]&gt; get name</span><br><span class="line">&quot;lj&quot;</span><br><span class="line">127.0.0.1:6379[1]&gt; exit</span><br></pre></td></tr></table></figure><p>可以看的这个目录多了个文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ pwd</span><br><span class="line">/Users/jiangyd/myredis</span><br><span class="line">jiangyd:myredis jiangyd$ ls -l</span><br><span class="line">total 8</span><br><span class="line">-rw-r--r--@ 1 jiangyd  staff  122  6 21 17:26 dump.rdb</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>redis默认16个数据库</title>
      <link href="/2018/06/21/redis%E9%BB%98%E8%AE%A416%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
      <url>/2018/06/21/redis%E9%BB%98%E8%AE%A416%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
      <content type="html"><![CDATA[<blockquote><p>redis默认16个数据库,通过索引访问,默认为0</p></blockquote><p>默认使用的是0数据库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># redis-cli</span><br><span class="line">127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure><p>切换数据库1,可以看的到命令行提示多了个[1]</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; select 1</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[1]&gt;</span><br></pre></td></tr></table></figure><p>切换到数据库15,可以看的到命令行提示多了个[15]</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379[1]&gt; select 15</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[15]&gt;</span><br></pre></td></tr></table></figure><p>切换到不存在的数据库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379[15]&gt; select 16</span><br><span class="line">(error) ERR DB index is out of range</span><br></pre></td></tr></table></figure><p>在数据库1创建的东西，并不会在其它数据库上显示</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379[15]&gt; select 1</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[1]&gt; set name jyd</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[1]&gt; get name</span><br><span class="line">&quot;jyd&quot;</span><br><span class="line">127.0.0.1:6379[1]&gt; select 15</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[15]&gt; get name</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379[15]&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>记一次crontab未生效原因</title>
      <link href="/2018/06/20/%E8%AE%B0%E4%B8%80%E6%AC%A1crontab%E6%9C%AA%E7%94%9F%E6%95%88%E5%8E%9F%E5%9B%A0/"/>
      <url>/2018/06/20/%E8%AE%B0%E4%B8%80%E6%AC%A1crontab%E6%9C%AA%E7%94%9F%E6%95%88%E5%8E%9F%E5%9B%A0/</url>
      <content type="html"><![CDATA[<blockquote><p>我有一个定时任务没有生效，看下我的定时任务脚本,当前用户是root</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># cd /var/spool/cron/</span><br><span class="line"># cat root </span><br><span class="line">*/1 * * * * sh /var/spool/cron/test.sh</span><br></pre></td></tr></table></figure><p>检测脚本文件是否存在</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ls /var/spool/cron/test.sh</span><br><span class="line">/var/spool/cron/test.sh</span><br></pre></td></tr></table></figure><p>检测脚本文件内容及是否能够执行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># cat test.sh </span><br><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">echo &quot;a&quot; &gt;&gt;b.txt</span><br><span class="line"># sh /var/spool/cron/test.sh</span><br><span class="line"># ls</span><br><span class="line">b.txt  root  test.sh</span><br><span class="line">[root@centos-7 cron]# cat b.txt </span><br><span class="line">a</span><br></pre></td></tr></table></figure><p>检测crond服务是否运行中</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># service crond status</span><br><span class="line">Redirecting to /bin/systemctl status crond.service</span><br><span class="line">● crond.service - Command Scheduler</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/crond.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: active (running) since Thu 2018-03-22 20:44:34 CST; 2 months 28 days ago</span><br><span class="line"> Main PID: 558 (crond)</span><br><span class="line">   Memory: 2.3M</span><br><span class="line">   CGroup: /system.slice/crond.service</span><br><span class="line">           └─558 /usr/sbin/crond -n</span><br></pre></td></tr></table></figure><p>检测一下crontab的日志,说明是有执行的</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">]# tailf /var/log/cron</span><br><span class="line">Jun 20 07:00:01 centos-7 CROND[31232]: (root) CMD (/usr/lib64/sa/sa1 1 1)</span><br><span class="line">Jun 20 07:00:01 centos-7 CROND[31231]: (root) CMD (sh /var/spool/cron/test.sh)</span><br><span class="line">Jun 20 07:01:01 centos-7 CROND[31252]: (root) CMD (sh /var/spool/cron/test.sh)</span><br><span class="line">Jun 20 07:01:01 centos-7 CROND[31253]: (root) CMD (run-parts /etc/cron.hourly)</span><br><span class="line">Jun 20 07:01:01 centos-7 run-parts(/etc/cron.hourly)[31253]: starting 0anacron</span><br><span class="line">Jun 20 07:01:01 centos-7 run-parts(/etc/cron.hourly)[31263]: finished 0anacron</span><br><span class="line">Jun 20 07:02:01 centos-7 CROND[31307]: (root) CMD (sh /var/spool/cron/test.sh)</span><br><span class="line">Jun 20 07:03:01 centos-7 CROND[31367]: (root) CMD (sh /var/spool/cron/test.sh)</span><br><span class="line">Jun 20 07:04:01 centos-7 CROND[31401]: (root) CMD (sh /var/spool/cron/test.sh)</span><br><span class="line">Jun 20 07:05:01 centos-7 CROND[31406]: (root) CMD (sh /var/spool/cron/test.sh)</span><br><span class="line">Jun 20 07:06:01 centos-7 CROND[31426]: (root) CMD (sh /var/spool/cron/test.sh)</span><br></pre></td></tr></table></figure><blockquote><p>这样定位肯定是脚本文件有问题了,把b.txt的路径改成绝对路径</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># cat test.sh </span><br><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">echo &quot;a&quot; &gt;&gt;/root/b.txt</span><br><span class="line"># cat /root/b.txt</span><br><span class="line">a</span><br></pre></td></tr></table></figure><p>果然可以执行了</p>]]></content>
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> crontab </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>/etc/resolv.conf配置自定义DNS,系统重启失效问题</title>
      <link href="/2018/06/15/etc-resolv-conf%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89DNS-%E7%B3%BB%E7%BB%9F%E9%87%8D%E5%90%AF%E5%A4%B1%E6%95%88%E9%97%AE%E9%A2%98/"/>
      <url>/2018/06/15/etc-resolv-conf%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89DNS-%E7%B3%BB%E7%BB%9F%E9%87%8D%E5%90%AF%E5%A4%B1%E6%95%88%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<blockquote><p>在/etc/resolv.conf设置dns，但是系统重启后会被清空（我的系统ubuntu:14.04）</p></blockquote><p>这个文件的开头也说了，不要编辑这个文件，更改会被覆盖的<br>其中 192.168.0.244 是我搭建的dns,必须放在第一行<br>202.96.209.133  202.96.209.5  是自动获取的dns</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># cat /etc/resolv.conf</span><br><span class="line"># Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)</span><br><span class="line">#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN</span><br><span class="line">nameserver 192.168.0.244</span><br><span class="line">nameserver 202.96.209.133</span><br><span class="line">nameserver 202.96.209.5</span><br></pre></td></tr></table></figure><blockquote><p>修改/etc/resolvconf/resolv.conf.d/head文件，可以保留设置<br>修改/etc/resolvconf/resolv.conf.d/base文件，可以保留设置<br>修改/etc/resolvconf/resolv.conf.d/tail文件，可以保留设置</p></blockquote><p>这3个文件有什么区别<br>head文件设置的dns放在/etc/resolv.conf最前面<br>base文件设置的dns放在head与tail中间,但是该文件只能设置一个dns<br>tail文件设置的dns放在/etc/resolv.conf最后面</p><blockquote><p>基于我的需要，dns必须设置为第一个,那么我们需要修改的文件如下</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># cat /etc/resolvconf/resolv.conf.d/head</span><br><span class="line">nameserver 192.168.0.244</span><br></pre></td></tr></table></figure><blockquote><p>最后重启</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service resolvconf restart</span><br></pre></td></tr></table></figure><blockquote><p>如果想去掉动态的DNS，只保留自己定义的DNS,那么就要设置静态的DNS了</p></blockquote><p>方法1:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># vim /etc/dhcp/dhclient.conf</span><br><span class="line">supersede domain-name-servers 192.168.0.244;</span><br></pre></td></tr></table></figure><p>方法2:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># vim /etc/network/interfaces</span><br><span class="line">auto eth0</span><br><span class="line">iface eth0 inet dhcp</span><br><span class="line">dns-nameservers 192.168.0.244</span><br></pre></td></tr></table></figure><blockquote><p>其它系统配置文件及路径可能不同，配置如果没有生效，建议重启系统</p></blockquote>]]></content>
      
      
        <tags>
            
            <tag> dns </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>我被chrome非安全端口搞的一脸懵逼</title>
      <link href="/2018/06/06/%E6%88%91%E8%A2%ABchrome%E9%9D%9E%E5%AE%89%E5%85%A8%E7%AB%AF%E5%8F%A3%E6%90%9E%E7%9A%84%E4%B8%80%E8%84%B8%E6%87%B5%E9%80%BC/"/>
      <url>/2018/06/06/%E6%88%91%E8%A2%ABchrome%E9%9D%9E%E5%AE%89%E5%85%A8%E7%AB%AF%E5%8F%A3%E6%90%9E%E7%9A%84%E4%B8%80%E8%84%B8%E6%87%B5%E9%80%BC/</url>
      <content type="html"><![CDATA[<blockquote><p>我有一个应用监听的端口是6666</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># netstat -lntp</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span><br><span class="line">tcp        0      0 0.0.0.0:6666            0.0.0.0:*               LISTEN      55/java</span><br></pre></td></tr></table></figure><blockquote><p>测试端口响应也是正确的</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ telnet 10.100.3.195 6666</span><br><span class="line">Trying 10.100.3.195...</span><br><span class="line">Connected to 10.100.3.195.</span><br><span class="line">Escape character is &apos;^]&apos;.</span><br></pre></td></tr></table></figure><blockquote><p>但是我用chrome一直访问不了</p></blockquote><img src="/2018/06/06/我被chrome非安全端口搞的一脸懵逼/chrome_6666.png" title="无法访问报错 ERR_UNSAFE_PORT"><blockquote><p>我把端口换成6662就是正确的，但是6666为什么就是不行了，清缓存，再试，没用</p></blockquote><p>于是我网上查了下 ERR_UNSAFE_PORT 6666，才发现chrome有非安全端口的限制</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">1,    // tcpmux</span><br><span class="line"> 7,    // echo</span><br><span class="line"> 9,    // discard</span><br><span class="line"> 11,   // systat</span><br><span class="line"> 13,   // daytime</span><br><span class="line"> 15,   // netstat</span><br><span class="line"> 17,   // qotd</span><br><span class="line"> 19,   // chargen</span><br><span class="line"> 20,   // ftp data</span><br><span class="line"> 21,   // ftp access</span><br><span class="line"> 22,   // ssh</span><br><span class="line"> 23,   // telnet</span><br><span class="line"> 25,   // smtp</span><br><span class="line"> 37,   // time</span><br><span class="line"> 42,   // name</span><br><span class="line"> 43,   // nicname</span><br><span class="line"> 53,   // domain</span><br><span class="line"> 77,   // priv-rjs</span><br><span class="line"> 79,   // finger</span><br><span class="line"> 87,   // ttylink</span><br><span class="line"> 95,   // supdup</span><br><span class="line"> 101,  // hostriame</span><br><span class="line"> 102,  // iso-tsap</span><br><span class="line"> 103,  // gppitnp</span><br><span class="line"> 104,  // acr-nema</span><br><span class="line"> 109,  // pop2</span><br><span class="line"> 110,  // pop3</span><br><span class="line"> 111,  // sunrpc</span><br><span class="line"> 113,  // auth</span><br><span class="line"> 115,  // sftp</span><br><span class="line"> 117,  // uucp-path</span><br><span class="line"> 119,  // nntp</span><br><span class="line"> 123,  // NTP</span><br><span class="line"> 135,  // loc-srv /epmap</span><br><span class="line"> 139,  // netbios</span><br><span class="line"> 143,  // imap2</span><br><span class="line"> 179,  // BGP</span><br><span class="line"> 389,  // ldap</span><br><span class="line"> 465,  // smtp+ssl</span><br><span class="line"> 512,  // print / exec</span><br><span class="line"> 513,  // login</span><br><span class="line"> 514,  // shell</span><br><span class="line"> 515,  // printer</span><br><span class="line"> 526,  // tempo</span><br><span class="line"> 530,  // courier</span><br><span class="line"> 531,  // chat</span><br><span class="line"> 532,  // netnews</span><br><span class="line"> 540,  // uucp</span><br><span class="line"> 556,  // remotefs</span><br><span class="line"> 563,  // nntp+ssl</span><br><span class="line"> 587,  // stmp?</span><br><span class="line"> 601,  // ??</span><br><span class="line"> 636,  // ldap+ssl</span><br><span class="line"> 993,  // ldap+ssl</span><br><span class="line"> 995,  // pop3+ssl</span><br><span class="line"> 2049, // nfs</span><br><span class="line"> 3659, // apple-sasl / PasswordServer</span><br><span class="line"> 4045, // lockd</span><br><span class="line"> 6000, // X11</span><br><span class="line"> 6665, // Alternate IRC [Apple addition]</span><br><span class="line"> 6666, // Alternate IRC [Apple addition]</span><br><span class="line"> 6667, // Standard IRC [Apple addition]</span><br><span class="line"> 6668, // Alternate IRC [Apple addition]</span><br><span class="line"> 6669, // Alternate IRC [Apple addition]</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> chrome </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>docker build镜像，运行镜像出现问题</title>
      <link href="/2018/06/06/docker-build%E9%95%9C%E5%83%8F%EF%BC%8C%E8%BF%90%E8%A1%8C%E9%95%9C%E5%83%8F%E5%87%BA%E7%8E%B0%E9%97%AE%E9%A2%98/"/>
      <url>/2018/06/06/docker-build%E9%95%9C%E5%83%8F%EF%BC%8C%E8%BF%90%E8%A1%8C%E9%95%9C%E5%83%8F%E5%87%BA%E7%8E%B0%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<blockquote><p>我的系统环境是mac ,docker环境如下</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ docker version</span><br><span class="line">Client:</span><br><span class="line"> Version:18.03.0-ce</span><br><span class="line"> API version:1.37</span><br><span class="line"> Go version:go1.9.4</span><br><span class="line"> Git commit:0520e24</span><br><span class="line"> Built:Wed Mar 21 23:06:22 2018</span><br><span class="line"> OS/Arch:darwin/amd64</span><br><span class="line"> Experimental:false</span><br><span class="line"> Orchestrator:swarm</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Engine:</span><br><span class="line">  Version:18.03.0-ce</span><br><span class="line">  API version:1.37 (minimum version 1.12)</span><br><span class="line">  Go version:go1.9.4</span><br><span class="line">  Git commit:0520e24</span><br><span class="line">  Built:Wed Mar 21 23:14:32 2018</span><br><span class="line">  OS/Arch:linux/amd64</span><br><span class="line">  Experimental:true</span><br></pre></td></tr></table></figure><blockquote><p>docker build镜像，运行镜像出现问题 （为什么会出现这个问题，估计是我的空间满了，然后我删除了很多镜像，容器，不知道什么情况下就引起了这个问题）</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ docker build -t ubuntu:test . --no-cache</span><br><span class="line">Sending build context to Docker daemon  189.5MB</span><br><span class="line">Step 1/16 : FROM ubuntu:16.04</span><br><span class="line"> ---&gt; f975c5035748</span><br><span class="line">Step 2/16 : RUN apt-get update</span><br><span class="line">error creating overlay mount to /var/lib/docker/overlay2/8861e6916ec6a1d012e9b1c2f73107f5e28e552da5f367d2ae02d0a359aa5c71-init/merged: no such file or directory</span><br></pre></td></tr></table></figure><blockquote><p>报错说没有文件或目录，我查看了下，/var/lib／docker这个目录是不存在的</p></blockquote><p>在github上找到了解决办法，但是这个解决办法是不太理想的，因为我的镜像容器通通被删除了</p><p><a href="https://github.com/docker/for-mac/issues/1396" target="_blank" rel="noopener">https://github.com/docker/for-mac/issues/1396</a></p><p>解决办法:</p><ol><li><p>#通过screen命令进入docker虚拟机<br>Screen into the Docker VM</p></li><li><p>#取消挂载，然后删除/var/lib/docker<br>Remove /var/lib/docker</p></li><li><p>#最后重启docker<br>Restart Docker via the widget</p></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ screen ~/Library/Containers/com.docker.docker/Data/com.docker.driver.amd64-linux/tty</span><br><span class="line">$ umount /var/lib/docker/overlay2</span><br><span class="line">$ rm -rf /var/lib/docker</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>nginx配置https简单实例</title>
      <link href="/2018/05/31/nginx%E9%85%8D%E7%BD%AEhttps%E7%AE%80%E5%8D%95%E5%AE%9E%E4%BE%8B/"/>
      <url>/2018/05/31/nginx%E9%85%8D%E7%BD%AEhttps%E7%AE%80%E5%8D%95%E5%AE%9E%E4%BE%8B/</url>
      <content type="html"><![CDATA[<ol><li>首先需要有域名，正好我有个域名testwd.cn</li><li>给域名申请证书，可以找个免费的<a href="https://freessl.org/" target="_blank" rel="noopener">https://freessl.org/</a>，也可以找个花钱的</li><li>阿里云ecs一台,需要有公网ip</li></ol><blockquote><p>首先给域名申请证书</p></blockquote><img src="/2018/05/31/nginx配置https简单实例/freessl.org.jpg" title="申请证书示范"><blockquote><p>把验证信息添加到DNS服务商解析记录</p></blockquote><img src="/2018/05/31/nginx配置https简单实例/yanzhen.jpg" title="验证"><img src="/2018/05/31/nginx配置https简单实例/dns_auth.jpg" title="添加验证解析"><blockquote><p>验证通过后，下载证书</p></blockquote><img src="/2018/05/31/nginx配置https简单实例/crt_key.jpg" title="拷贝证书内容及私钥"><blockquote><p>nginx配置</p></blockquote><p>把证书内容拷贝到/home/testwd.cn.crt;<br>把私钥内容拷贝到/home/testwd.cn.key</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># cat /etc/nginx/conf.d/test.conf </span><br><span class="line">server &#123;</span><br><span class="line">  listen 443 ssl;</span><br><span class="line">  ssl on;</span><br><span class="line">  server_name web.testwd.cn;</span><br><span class="line"></span><br><span class="line">  index index.html;</span><br><span class="line">  root /home/dist/;</span><br><span class="line"></span><br><span class="line">  ssl_certificate /home/testwd.cn.crt;</span><br><span class="line">  ssl_certificate_key /home/testwd.cn.key;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>查看本ecs实例公网ip</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># curl ip.sb</span><br><span class="line">47.96.86.120</span><br></pre></td></tr></table></figure><blockquote><p>配置DNS域名解析到ip</p></blockquote><img src="/2018/05/31/nginx配置https简单实例/dns_ip.jpg" title="域名解析到公网ip"><blockquote><p>重新启动nginx</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># /etc/init.d/nginx restart</span><br><span class="line">[ ok ] Restarting nginx (via systemctl): nginx.service.</span><br></pre></td></tr></table></figure><blockquote><p>查看是否监听443端口</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># netstat -lntp</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      836/sshd        </span><br><span class="line">tcp        0      0 0.0.0.0:443             0.0.0.0:*               LISTEN      17588/nginx -g daem</span><br><span class="line">tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      17588/nginx -g daem</span><br><span class="line">tcp6       0      0 :::80                   :::*                    LISTEN      17588/nginx -g daem</span><br></pre></td></tr></table></figure><blockquote><p>验证通过https访问</p></blockquote><img src="/2018/05/31/nginx配置https简单实例/success.jpg" title="成功界面">]]></content>
      
      
        <tags>
            
            <tag> nginx </tag>
            
            <tag> ssl </tag>
            
            <tag> https </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>搭建postfix邮件服务器</title>
      <link href="/2018/05/29/%E6%90%AD%E5%BB%BApostfix%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
      <url>/2018/05/29/%E6%90%AD%E5%BB%BApostfix%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
      <content type="html"><![CDATA[<blockquote><p>设置主机名为test.cn</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim /etc/hostname</span><br></pre></td></tr></table></figure><blockquote><p>查看主机名设置是否生效</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hostname</span><br><span class="line">test.cn</span><br></pre></td></tr></table></figure><blockquote><p>更新及安装</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install postfix</span><br></pre></td></tr></table></figure><img src="/2018/05/29/搭建postfix邮件服务器/mail_configuration.png" title="选择Internet Site"><img src="/2018/05/29/搭建postfix邮件服务器/mail_name.png" title="设置mail name"><blockquote><p>安装完成后监听端口</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -lntp|grep 25</span><br><span class="line">(No info could be read for &quot;-p&quot;: geteuid()=1000 but you should be root.)</span><br><span class="line">tcp        0      0 0.0.0.0:25              0.0.0.0:*               LISTEN      -</span><br><span class="line">tcp6       0      0 :::25                   :::*                    LISTEN      -</span><br></pre></td></tr></table></figure><blockquote><p>安装mail测试下</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install mailutils</span><br><span class="line">$ echo &quot;this is a test email&quot; |mail &quot;962584902@qq.com&quot;</span><br></pre></td></tr></table></figure><blockquote><p>看看日志是否正常</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ tailf /var/log/mail.log</span><br><span class="line">May 29 14:14:32 test postfix/pickup[2416]: E275A601B5: uid=1000 from=&lt;jiangyd@test.cn&gt;</span><br><span class="line">May 29 14:14:32 test postfix/cleanup[2938]: E275A601B5: message-id=&lt;20180529061432.E275A601B5@test.cn&gt;</span><br><span class="line">May 29 14:14:32 test postfix/qmgr[2417]: E275A601B5: from=&lt;jiangyd@test.cn&gt;, size=320, nrcpt=1 (queue active)</span><br><span class="line">May 29 14:14:33 test postfix/smtp[2940]: connect to mx3.qq.com[240e:ff:f040:28::f]:25: Network is unreachable</span><br><span class="line">May 29 14:14:34 test postfix/smtp[2940]: E275A601B5: to=&lt;962584902@qq.com&gt;, relay=mx3.qq.com[183.57.48.35]:25, delay=1.4, delays=0.02/0.01/0.17/1.2, dsn=2.0.0, status=sent (250 Ok: queued as )</span><br><span class="line">May 29 14:14:34 test postfix/qmgr[2417]: E275A601B5: removed</span><br></pre></td></tr></table></figure><blockquote><p>去qq邮箱看看</p></blockquote><img src="/2018/05/29/搭建postfix邮件服务器/mail_to_qq.png" title="验证"><blockquote><p>试试其它机器，连接邮件服务器来发邮件，并用python实现</p></blockquote><p>其它机器要能访问test.cn这个地址，可以本地绑定host</p><blockquote><p>python脚本</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># coding=utf-8</span><br><span class="line">__author__ = &apos;jyd&apos;</span><br><span class="line"></span><br><span class="line">import smtplib</span><br><span class="line"></span><br><span class="line">from email.mime.text import MIMEText</span><br><span class="line"></span><br><span class="line">smtpserver = &quot;test.cn&quot;</span><br><span class="line">username = &quot;jiangyd@test.cn&quot;</span><br><span class="line"></span><br><span class="line">msg = MIMEText(&quot;你好，这是一封测试邮件&quot;)</span><br><span class="line">msg[&apos;subject&apos;] = &quot;测试邮件&quot;</span><br><span class="line">msg[&apos;From&apos;] = &quot;jiangyd@test.cn&quot;</span><br><span class="line">msg[&apos;To&apos;] = &quot;962584902@qq.com&quot;</span><br><span class="line"></span><br><span class="line">smtp = smtplib.SMTP()</span><br><span class="line">smtp.connect(smtpserver)</span><br><span class="line">smtp.sendmail(msg[&apos;From&apos;], msg[&apos;To&apos;], msg.as_string())</span><br><span class="line">smtp.quit()</span><br></pre></td></tr></table></figure><blockquote><p>运行以上脚本报错了</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">    raise SMTPRecipientsRefused(senderrs)</span><br><span class="line">smtplib.SMTPRecipientsRefused: &#123;&apos;962584902@qq.com&apos;: (454, b&apos;4.7.1 &lt;962584902@qq.com&gt;: Relay access denied&apos;)&#125;</span><br></pre></td></tr></table></figure><blockquote><p>看看日志，发现是访问被拒绝了,不允许这个192.168.56.1<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ tailf /var/log/mail.log</span><br><span class="line">May 29 14:26:33 test postfix/smtpd[3171]: connect from unknown[192.168.56.1]</span><br><span class="line">May 29 14:26:33 test postfix/smtpd[3171]: NOQUEUE: reject: RCPT from unknown[192.168.56.1]: 454 4.7.1 &lt;962584902@qq.com&gt;: Relay access denied; from=&lt;jiangyd@test.cn&gt; to=&lt;962584902@qq.com&gt; proto=ESMTP helo=&lt;jiangyd.local&gt;</span><br><span class="line">May 29 14:26:33 test postfix/smtpd[3171]: lost connection after RSET from unknown[192.168.56.1]</span><br><span class="line">May 29 14:26:33 test postfix/smtpd[3171]: disconnect from unknown[192.168.56.1]</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>更改设置 增加可信客户端网段192.168.56.0/24,也可是增加万能的0.0.0.0/0</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim /etc/postfix/main.cf</span><br><span class="line">mynetworks = 127.0.0.0/8 [::ffff:127.0.0.0]/104 [::1]/128 192.168.56.0/24</span><br></pre></td></tr></table></figure><blockquote><p>更改后需要重启<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo /etc/init.d/postfix restart</span><br><span class="line">sudo: unable to resolve host test.cn</span><br><span class="line"> * Stopping Postfix Mail Transport Agent postfix                                     [ OK ]</span><br><span class="line"> * Starting Postfix Mail Transport Agent postfix                                     [ OK ]</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>再次验证<br><img src="/2018/05/29/搭建postfix邮件服务器/mail_to_qq_python.png" title="设置mail name"></p></blockquote>]]></content>
      
      
        <tags>
            
            <tag> postfix </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>mysql创建数据库,用户,及授权</title>
      <link href="/2018/05/28/mysql%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93-%E7%94%A8%E6%88%B7-%E5%8F%8A%E6%8E%88%E6%9D%83/"/>
      <url>/2018/05/28/mysql%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93-%E7%94%A8%E6%88%B7-%E5%8F%8A%E6%8E%88%E6%9D%83/</url>
      <content type="html"><![CDATA[<blockquote><p>创建数据库,注意数据库加上反撇号,不然有些带横杠的会被认为是减号，如test-de会创建不成功</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create database  `testdb` default character set utf8 default collate utf8_general_ci;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br></pre></td></tr></table></figure><blockquote><p>创建用户</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create user &apos;jyd&apos;@&apos;%&apos; IDENTIFIED BY &apos;123456&apos;;</span><br><span class="line">Query OK, 0 rows affected (0.04 sec)</span><br></pre></td></tr></table></figure><blockquote><p>给用户授权</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; GRANT ALL PRIVILEGES ON testdb.* to &apos;jyd&apos;@&apos;%&apos;;</span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure><blockquote><p>给某数据库设置只读权限（message_bb）</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; GRANT SELECT ON message_bb.* to &apos;jyd&apos;@&apos;%&apos;;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure><blockquote><p>刷新权限</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; flush privileges;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure><blockquote><p>更改用户密码</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SET PASSWORD FOR &apos;jyd&apos;@&apos;%&apos; = PASSWORD(&apos;new123456&apos;);</span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>linux普通用户增加sudo权限</title>
      <link href="/2018/05/26/linux%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E5%A2%9E%E5%8A%A0sudo%E6%9D%83%E9%99%90/"/>
      <url>/2018/05/26/linux%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E5%A2%9E%E5%8A%A0sudo%E6%9D%83%E9%99%90/</url>
      <content type="html"><![CDATA[<p>普通用户执行sudo没有权限</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update</span><br><span class="line">sudo: unable to resolve host dest1</span><br><span class="line">[sudo] password for test: </span><br><span class="line">test is not in the sudoers file.  This incident will be reported.</span><br></pre></td></tr></table></figure><blockquote><p>解决办法: 切换到超管用户编辑vim /etc/sudoers,把用户增加进去</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># User privilege specification</span><br><span class="line">rootALL=(ALL:ALL) ALL</span><br><span class="line">test    ALL=(ALL:ALL) ALL</span><br></pre></td></tr></table></figure><p>编辑完成后，退出时需要增加!,使用:wq!退出，因为是只读文件</p>]]></content>
      
      
        <tags>
            
            <tag> sudo </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>记一次selenium 一打开浏览器就自动关闭了的问题</title>
      <link href="/2018/05/23/%E8%AE%B0%E4%B8%80%E6%AC%A1selenium-%E4%B8%80%E6%89%93%E5%BC%80%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B0%B1%E8%87%AA%E5%8A%A8%E5%85%B3%E9%97%AD%E4%BA%86%E7%9A%84%E9%97%AE%E9%A2%98-Only-local-connections-are-allowed/"/>
      <url>/2018/05/23/%E8%AE%B0%E4%B8%80%E6%AC%A1selenium-%E4%B8%80%E6%89%93%E5%BC%80%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B0%B1%E8%87%AA%E5%8A%A8%E5%85%B3%E9%97%AD%E4%BA%86%E7%9A%84%E9%97%AE%E9%A2%98-Only-local-connections-are-allowed/</url>
      <content type="html"><![CDATA[<p>selenium无法打开浏览器运行</p><p>1.chromedriver 版本与浏览器不匹配<br>2.如果是在本地调用， localhost需要指向127.0.0.1这个IP，不然也跑不起来(其实只是要host能指向正确的selenium driver的地址就行)</p><p><a href="https://npm.taobao.org/mirrors/chromedriver" target="_blank" rel="noopener">https://npm.taobao.org/mirrors/chromedriver</a></p><p><a href="https://npm.taobao.org/mirrors/selenium" target="_blank" rel="noopener">https://npm.taobao.org/mirrors/selenium</a></p>]]></content>
      
      
        <tags>
            
            <tag> selenium </tag>
            
            <tag> chromedriver </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>设置mysql最大连接数</title>
      <link href="/2018/05/21/%E8%AE%BE%E7%BD%AEmysql%E6%9C%80%E5%A4%A7%E8%BF%9E%E6%8E%A5%E6%95%B0/"/>
      <url>/2018/05/21/%E8%AE%BE%E7%BD%AEmysql%E6%9C%80%E5%A4%A7%E8%BF%9E%E6%8E%A5%E6%95%B0/</url>
      <content type="html"><![CDATA[<p>为什么要修改连接数，是因为默认的连接不满足需求，在硬件条件允许下，修改最大连接数达到满足需求的目的</p><blockquote><p>查看当前mysql最大连接数</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &apos;max_connections&apos;;</span><br><span class="line">+-----------------+-------+</span><br><span class="line">| Variable_name   | Value |</span><br><span class="line">+-----------------+-------+</span><br><span class="line">| max_connections | 1000  |</span><br><span class="line">+-----------------+-------+</span><br><span class="line">1 row in set (0.31 sec)</span><br></pre></td></tr></table></figure><blockquote><p>修改当前mysql最大连接数</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set global max_connections=1000;</span><br></pre></td></tr></table></figure><blockquote><p>但是以上的修改方式，在mysql服务重启后会失效</p></blockquote><blockquote><p>查看当前mysql连接</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SHOW PROCESSLIST;</span><br><span class="line">+-----+------+------------------+------+---------+------+----------+------------------+</span><br><span class="line">| Id  | User | Host             | db   | Command | Time | State    | Info             |</span><br><span class="line">+-----+------+------------------+------+---------+------+----------+------------------+</span><br><span class="line">|  66 | root | localhost        | NULL | Query   |    0 | starting | SHOW PROCESSLIST |</span><br><span class="line">| 331 | root | 172.17.0.1:54084 | csos | Sleep   |    9 |          | NULL             |</span><br><span class="line">| 332 | root | 172.17.0.1:54086 | csos | Sleep   |    8 |          | NULL             |</span><br><span class="line">| 333 | root | 172.17.0.1:54090 | csos | Sleep   |    9 |          | NULL             |</span><br><span class="line">| 334 | root | 172.17.0.1:54098 | csos | Sleep   |    9 |          | NULL             |</span><br><span class="line">| 335 | root | 172.17.0.1:54096 | csos | Sleep   |    9 |          | NULL             |</span><br><span class="line">| 336 | root | 172.17.0.1:54092 | csos | Sleep   |    8 |          | NULL             |</span><br><span class="line">| 337 | root | 172.17.0.1:54088 | csos | Sleep   |    9 |          | NULL             |</span><br><span class="line">| 338 | root | 172.17.0.1:54094 | csos | Sleep   |    9 |          | NULL             |</span><br><span class="line">| 339 | root | 172.17.0.1:54100 | csos | Sleep   |    9 |          | NULL             |</span><br><span class="line">| 340 | root | 172.17.0.1:54116 | csos | Sleep   |    8 |          | NULL             |</span><br><span class="line">| 341 | root | 172.17.0.1:54104 | csos | Sleep   |    8 |          | NULL             |</span><br><span class="line">| 342 | root | 172.17.0.1:54120 | csos | Sleep   |    9 |          | NULL             |</span><br><span class="line">| 343 | root | 172.17.0.1:54106 | csos | Sleep   |    9 |          | NULL             |</span><br><span class="line">| 344 | root | 172.17.0.1:54122 | csos | Sleep   |    8 |          | NULL             |</span><br><span class="line">| 345 | root | 172.17.0.1:54108 | csos | Sleep   |    8 |          | NULL             |</span><br><span class="line">| 346 | root | 172.17.0.1:54110 | csos | Sleep   |    8 |          | NULL             |</span><br><span class="line">| 347 | root | 172.17.0.1:54112 | csos | Sleep   |    9 |          | NULL             |</span><br><span class="line">| 348 | root | 172.17.0.1:54102 | csos | Sleep   |    8 |          | NULL             |</span><br><span class="line">| 349 | root | 172.17.0.1:54114 | csos | Sleep   |    8 |          | NULL             |</span><br><span class="line">| 350 | root | 172.17.0.1:54118 | csos | Sleep   |    8 |          | NULL             |</span><br><span class="line">+-----+------+------------------+------+---------+------+----------+------------------+</span><br><span class="line">21 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><blockquote><p>如果查看连接数需要过滤的话，可以如下操作</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from information_schema.PROCESSLIST where db=&apos;csos&apos;;</span><br><span class="line">+-----+------+------------------+------+---------+------+-------+------+</span><br><span class="line">| ID  | USER | HOST             | DB   | COMMAND | TIME | STATE | INFO |</span><br><span class="line">+-----+------+------------------+------+---------+------+-------+------+</span><br><span class="line">| 354 | root | 172.17.0.1:54130 | csos | Sleep   |    4 |       | NULL |</span><br><span class="line">| 355 | root | 172.17.0.1:54132 | csos | Sleep   |    4 |       | NULL |</span><br><span class="line">+-----+------+------------------+------+---------+------+-------+------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>时间不对，通过ntpdate同步时间</title>
      <link href="/2018/05/21/%E6%97%B6%E9%97%B4%E4%B8%8D%E5%AF%B9%EF%BC%8C%E9%80%9A%E8%BF%87ntpdate%E5%90%8C%E6%AD%A5%E6%97%B6%E9%97%B4/"/>
      <url>/2018/05/21/%E6%97%B6%E9%97%B4%E4%B8%8D%E5%AF%B9%EF%BC%8C%E9%80%9A%E8%BF%87ntpdate%E5%90%8C%E6%AD%A5%E6%97%B6%E9%97%B4/</url>
      <content type="html"><![CDATA[<blockquote><p>我有一台虚拟机，时间不对，影响我使用,使用阿里云公网NTP服务同步时间</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ntpdate ntp1.aliyun.com</span><br><span class="line">21 May 12:50:42 ntpdate[6794]: step time server 182.92.12.11 offset 0.548418 sec</span><br></pre></td></tr></table></figure><p>其它阿里云公网NTP时间服务器</p><h2 id="公网NTP"><a href="#公网NTP" class="headerlink" title="公网NTP "></a>公网NTP </h2><p>ntp2.aliyun.com<br>ntp3.aliyun.com<br>ntp4.aliyun.com<br>ntp5.aliyun.com<br>ntp6.aliyun.com<br>ntp7.aliyun.com</p>]]></content>
      
      
        <tags>
            
            <tag> 时间同步 </tag>
            
            <tag> ntpdate </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>通过ssh config配置, 使git用不同私钥提交代码</title>
      <link href="/2018/05/15/%E9%80%9A%E8%BF%87ssh-config%E9%85%8D%E7%BD%AE-%E4%BD%BFgit%E7%94%A8%E4%B8%8D%E5%90%8C%E7%A7%81%E9%92%A5%E6%8F%90%E4%BA%A4%E4%BB%A3%E7%A0%81/"/>
      <url>/2018/05/15/%E9%80%9A%E8%BF%87ssh-config%E9%85%8D%E7%BD%AE-%E4%BD%BFgit%E7%94%A8%E4%B8%8D%E5%90%8C%E7%A7%81%E9%92%A5%E6%8F%90%E4%BA%A4%E4%BB%A3%E7%A0%81/</url>
      <content type="html"><![CDATA[<p>我有在用hexo部署blog在github上，本地构建完成后，直接可以把编译后的文件部署上去</p><p>但是，我希望源文件也可以存放在github上，所以我又搞了一个仓库地址</p><p>但是在当前目录提交代码时，只能提交一个，另一个提交不了，因为默认使用的私钥文件不对</p><p>为了区分开来，我只能配置不同的私钥文件,可以参考下我的配置文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ touch ~/.ssh/config</span><br><span class="line">$ vim ~/.ssh/config</span><br><span class="line"></span><br><span class="line">HOST server1</span><br><span class="line"> HOSTNAME 192.168.56.102</span><br><span class="line"> User jiangyd</span><br><span class="line"> Port 3333</span><br><span class="line"></span><br><span class="line">HOST gitblog.com</span><br><span class="line">  HOSTNAME github.com</span><br><span class="line">  IdentityFile ~/.ssh/id_rsa</span><br><span class="line"></span><br><span class="line">HOST github.com</span><br><span class="line">  HOSTNAME github.com</span><br><span class="line">  IdentityFile ~/.ssh/github.com</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>HOST</td><td>别名    </td></tr><tr><td>HOSTNAME</td><td>主机</td></tr><tr><td>User</td><td>用户名</td></tr><tr><td>Port</td><td>端口</td></tr><tr><td>IdentityFile</td><td>私钥文件   </td></tr></tbody></table><blockquote><p>连接例子</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ssh server1</span><br><span class="line">jiangyd@192.168.56.102&apos;s password:</span><br></pre></td></tr></table></figure><blockquote><p>我的hexo _config.yml github仓库配置，注意这里用别名</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: git@gitblog.com:jiangyd/jiangyd.github.io</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><blockquote><p>这样我就可以在hexo blog项目里面，即可以提交源代码到Github，又可以提交构建部署的代码到Github<br>因为部署的github与源代码仓库地址不是一个</p></blockquote><p>以上的配置都是太过复杂，为什么会出现这种情况，是因为我把自已电脑的公钥存放到Github项目<br>里面了，而不同项目又不能存放同一个公钥，所以才会有我上面的这些设置</p><p>那么只要把公钥在Github上面做全局的设置，那么我本地就不用搞这么复杂了</p>]]></content>
      
      
        <tags>
            
            <tag> ssh </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>容器与宿主机时区不一致问题</title>
      <link href="/2018/05/09/%E5%AE%B9%E5%99%A8%E4%B8%8E%E5%AE%BF%E4%B8%BB%E6%9C%BA%E6%97%B6%E5%8C%BA%E4%B8%8D%E4%B8%80%E8%87%B4%E9%97%AE%E9%A2%98/"/>
      <url>/2018/05/09/%E5%AE%B9%E5%99%A8%E4%B8%8E%E5%AE%BF%E4%B8%BB%E6%9C%BA%E6%97%B6%E5%8C%BA%E4%B8%8D%E4%B8%80%E8%87%B4%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<h4 id="docker-容器时区与宿主机时区保持一致"><a href="#docker-容器时区与宿主机时区保持一致" class="headerlink" title="docker 容器时区与宿主机时区保持一致"></a>docker 容器时区与宿主机时区保持一致</h4><blockquote><p>方法1 共享宿主机的local time</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -v /etc/localtime:/etc/localtime -v /etc/timezone:/etc/timezone ubuntu:16.04 /bin/bash</span><br></pre></td></tr></table></figure><blockquote><p>方法2 在dockerfile中定义</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">RUN /bin/cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \</span><br><span class="line">  &amp;&amp; echo &apos;Asia/Shanghai&apos; &gt;/etc/timezone \</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line">RUN /bin/cp /etc/localtime /etc/localtime \</span><br><span class="line">  &amp;&amp; echo &apos;Asia/Shanghai&apos; &gt;/etc/timezone \</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> 挂载 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ubuntu apt使用阿里源</title>
      <link href="/2018/05/09/ubuntu-apt%E4%BD%BF%E7%94%A8%E9%98%BF%E9%87%8C%E6%BA%90/"/>
      <url>/2018/05/09/ubuntu-apt%E4%BD%BF%E7%94%A8%E9%98%BF%E9%87%8C%E6%BA%90/</url>
      <content type="html"><![CDATA[<h4 id="ubuntu-14-04使用阿里的软件源"><a href="#ubuntu-14-04使用阿里的软件源" class="headerlink" title="ubuntu 14.04使用阿里的软件源"></a>ubuntu 14.04使用阿里的软件源</h4><blockquote><p>备份</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># cp /etc/apt/sources.list /etc/apt/sources.list.bak</span><br></pre></td></tr></table></figure><blockquote><p>替换</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">cat &gt;/etc/apt/sources.list&lt;&lt;EOF</span><br><span class="line">deb https://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse</span><br><span class="line">deb https://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb https://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb https://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">## Not recommended</span><br><span class="line"># deb https://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><blockquote><p>最后执行apt更新</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># apt-get update</span><br></pre></td></tr></table></figure><blockquote><p>其它系统参考此地址</p></blockquote><p><a href="https://opsx.alibaba.com/mirror" target="_blank" rel="noopener">https://opsx.alibaba.com/mirror</a></p>]]></content>
      
      
        <tags>
            
            <tag> apt </tag>
            
            <tag> apt-get </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Linux下使用sed替换dns地址</title>
      <link href="/2018/05/09/Linux%E4%B8%8B%E4%BD%BF%E7%94%A8sed%E6%9B%BF%E6%8D%A2dns%E5%9C%B0%E5%9D%80/"/>
      <url>/2018/05/09/Linux%E4%B8%8B%E4%BD%BF%E7%94%A8sed%E6%9B%BF%E6%8D%A2dns%E5%9C%B0%E5%9D%80/</url>
      <content type="html"><![CDATA[<h4 id="sed替换-etc-resolv-conf文件的dns地址"><a href="#sed替换-etc-resolv-conf文件的dns地址" class="headerlink" title="sed替换/etc/resolv.conf文件的dns地址"></a>sed替换/etc/resolv.conf文件的dns地址</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># cat /etc/resolv.conf</span><br><span class="line">nameserver 114.114.114.114</span><br><span class="line">nameserver 8.8.8.8</span><br><span class="line"></span><br><span class="line"># sed -i &apos;s/[0-9]\&#123;1,3\&#125;\.[0-9]\&#123;1,3\&#125;\.[0-9]\&#123;1,3\&#125;\.[0-9]\&#123;1,3\&#125;/172.16.0.244/g&apos; /etc/resolv.conf</span><br><span class="line"></span><br><span class="line"># cat /etc/resolv.conf</span><br><span class="line">nameserver 172.16.0.244</span><br><span class="line">nameserver 172.16.0.244</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> sed </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ubuntu使用bind9搭建DNS</title>
      <link href="/2018/05/07/ubuntu%E4%BD%BF%E7%94%A8bind9%E6%90%AD%E5%BB%BADNS/"/>
      <url>/2018/05/07/ubuntu%E4%BD%BF%E7%94%A8bind9%E6%90%AD%E5%BB%BADNS/</url>
      <content type="html"><![CDATA[<h4 id="安装bind9"><a href="#安装bind9" class="headerlink" title="安装bind9"></a>安装bind9</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install bind9</span><br></pre></td></tr></table></figure><h4 id="默认配置文件路径"><a href="#默认配置文件路径" class="headerlink" title="默认配置文件路径"></a>默认配置文件路径</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pwd</span><br><span class="line">/etc/bind</span><br></pre></td></tr></table></figure><h4 id="添加域名正反向解析配置"><a href="#添加域名正反向解析配置" class="headerlink" title="添加域名正反向解析配置"></a>添加域名正反向解析配置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim named.conf.default-zones</span><br><span class="line"></span><br><span class="line">zone &quot;jiangyd.cn&quot; &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;/etc/bind/db.jiangyd.cn&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">zone &quot;56.168.192.in-addr.arpa&quot; &#123;</span><br><span class="line">type master;</span><br><span class="line">file &quot;/etc/bind/192.168.56.zone&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">zone &quot;ipad.jiangyd.com.cn&quot; &#123;</span><br><span class="line">type master;</span><br><span class="line">file &quot;/etc/bind/ipad.jiangyd.com.cn&quot;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>正向解析</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># cat db.jiangyd.cn</span><br><span class="line">;</span><br><span class="line">; BIND data file for local loopback interface</span><br><span class="line">;</span><br><span class="line">$TTL604800</span><br><span class="line">@INSOAjiangyd.cn. root.localhost. (</span><br><span class="line">      2; Serial</span><br><span class="line"> 604800; Refresh</span><br><span class="line">  86400; Retry</span><br><span class="line">2419200; Expire</span><br><span class="line"> 604800 ); Negative Cache TTL</span><br><span class="line">;</span><br><span class="line">@INNSjiangyd.cn.</span><br><span class="line">@INA127.0.0.1</span><br><span class="line">@INAAAA::1</span><br><span class="line"></span><br><span class="line">www     IN      A      192.168.56.102</span><br><span class="line">bbs     IN      A      192.168.56.102</span><br><span class="line">music   IN      A      192.168.56.1</span><br></pre></td></tr></table></figure><blockquote><p>反向解析</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># cat 192.168.56.zone</span><br><span class="line">;</span><br><span class="line">; BIND reverse data file for local loopback interface</span><br><span class="line">;</span><br><span class="line">$TTL604800</span><br><span class="line">@INSOAjiangyd.cn. root.localhost. (</span><br><span class="line">      1; Serial</span><br><span class="line"> 604800; Refresh</span><br><span class="line">  86400; Retry</span><br><span class="line">2419200; Expire</span><br><span class="line"> 604800 ); Negative Cache TTL</span><br><span class="line">;</span><br><span class="line">@INNS     jiangyd.cn.</span><br><span class="line">102     IN      PTR    www.jiangyd.cn.</span><br><span class="line">102     IN      PTR    bbs.jiangyd.cn.</span><br><span class="line">1       IN      PTR    music.jiangyd.cn.</span><br></pre></td></tr></table></figure><blockquote><p>有的应用需要为不同用户分配不同域名，试试泛解析</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># cat ipad.jiangyd.com.cn</span><br><span class="line">;</span><br><span class="line">; BIND data file for local loopback interface</span><br><span class="line">;</span><br><span class="line">$TTL604800</span><br><span class="line">@INSOAipad.jiangyd.com.cn. root.localhost. (</span><br><span class="line">      2; Serial</span><br><span class="line"> 604800; Refresh</span><br><span class="line">  86400; Retry</span><br><span class="line">2419200; Expire</span><br><span class="line"> 604800 ); Negative Cache TTL</span><br><span class="line">;</span><br><span class="line">@INNSipad.jiangyd.com.cn.</span><br><span class="line">@INA127.0.0.1</span><br><span class="line">@INAAAA::1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">www  IN  A  192.168.56.1</span><br><span class="line">bbs  IN  A  192.168.56.102</span><br><span class="line">*    IN  A  192.168.56.1</span><br></pre></td></tr></table></figure><blockquote><p>正反向解析测试</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">root@jiangydpc:/etc/bind# ping www.jiangyd.cn</span><br><span class="line">PING www.jiangyd.cn (192.168.56.102) 56(84) bytes of data.</span><br><span class="line">64 bytes from dns.jiangyd.cn (192.168.56.102): icmp_seq=1 ttl=64 time=0.069 ms</span><br><span class="line">64 bytes from dns.jiangyd.cn (192.168.56.102): icmp_seq=2 ttl=64 time=0.026 ms</span><br><span class="line">^C</span><br><span class="line">--- www.jiangyd.cn ping statistics ---</span><br><span class="line">2 packets transmitted, 2 received, 0% packet loss, time 999ms</span><br><span class="line">rtt min/avg/max/mdev = 0.026/0.047/0.069/0.022 ms</span><br><span class="line">root@jiangydpc:/etc/bind# ping bbs.jiangyd.cn</span><br><span class="line">PING bbs.jiangyd.cn (192.168.56.102) 56(84) bytes of data.</span><br><span class="line">64 bytes from www.jiangyd.cn (192.168.56.102): icmp_seq=1 ttl=64 time=0.010 ms</span><br><span class="line">64 bytes from www.jiangyd.cn (192.168.56.102): icmp_seq=2 ttl=64 time=0.023 ms</span><br><span class="line">^C</span><br><span class="line">--- bbs.jiangyd.cn ping statistics ---</span><br><span class="line">2 packets transmitted, 2 received, 0% packet loss, time 999ms</span><br><span class="line">rtt min/avg/max/mdev = 0.010/0.016/0.023/0.007 ms</span><br><span class="line">root@jiangydpc:/etc/bind# ping music.jiangyd.cn</span><br><span class="line">PING music.jiangyd.cn (192.168.56.1) 56(84) bytes of data.</span><br><span class="line">64 bytes from music.jiangyd.cn (192.168.56.1): icmp_seq=1 ttl=64 time=0.277 ms</span><br><span class="line">64 bytes from music.jiangyd.cn (192.168.56.1): icmp_seq=2 ttl=64 time=0.355 ms</span><br><span class="line">64 bytes from music.jiangyd.cn (192.168.56.1): icmp_seq=3 ttl=64 time=0.203 ms</span><br><span class="line">^C</span><br><span class="line">--- music.jiangyd.cn ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 1999ms</span><br><span class="line">rtt min/avg/max/mdev = 0.203/0.278/0.355/0.063 ms</span><br><span class="line">root@jiangydpc:/etc/bind# host -t PTR 192.168.56.1</span><br><span class="line">1.56.168.192.in-addr.arpa domain name pointer music.jiangyd.cn.</span><br><span class="line">root@jiangydpc:/etc/bind# host -t PTR 192.168.56.102</span><br><span class="line">102.56.168.192.in-addr.arpa domain name pointer dns.jiangyd.cn.</span><br><span class="line">102.56.168.192.in-addr.arpa domain name pointer www.jiangyd.cn.</span><br><span class="line">102.56.168.192.in-addr.arpa domain name pointer bbs.jiangyd.cn.</span><br></pre></td></tr></table></figure><blockquote><p>泛解析,前面域名可以随便填写了</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">root@jiangydpc:/etc/bind# ping wqewweq.ipad.jiangyd.com.cn</span><br><span class="line">PING wqewweq.ipad.jiangyd.com.cn (192.168.56.1) 56(84) bytes of data.</span><br><span class="line">64 bytes from music.jiangyd.cn (192.168.56.1): icmp_seq=1 ttl=64 time=0.295 ms</span><br><span class="line">64 bytes from music.jiangyd.cn (192.168.56.1): icmp_seq=2 ttl=64 time=0.358 ms</span><br><span class="line">64 bytes from music.jiangyd.cn (192.168.56.1): icmp_seq=3 ttl=64 time=0.246 ms</span><br><span class="line">^C</span><br><span class="line">--- wqewweq.ipad.jiangyd.com.cn ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 2000ms</span><br><span class="line">rtt min/avg/max/mdev = 0.246/0.299/0.358/0.050 ms</span><br><span class="line">root@jiangydpc:/etc/bind# ping www.ipad.jiangyd.com.cn</span><br><span class="line">PING www.ipad.jiangyd.com.cn (192.168.56.1) 56(84) bytes of data.</span><br><span class="line">64 bytes from music.jiangyd.cn (192.168.56.1): icmp_seq=1 ttl=64 time=0.194 ms</span><br><span class="line">64 bytes from music.jiangyd.cn (192.168.56.1): icmp_seq=2 ttl=64 time=0.289 ms</span><br><span class="line">^C</span><br><span class="line">--- www.ipad.jiangyd.com.cn ping statistics ---</span><br><span class="line">2 packets transmitted, 2 received, 0% packet loss, time 1002ms</span><br><span class="line">rtt min/avg/max/mdev = 0.194/0.241/0.289/0.049 ms</span><br><span class="line">root@jiangydpc:/etc/bind# ping bbs.ipad.jiangyd.com.cn</span><br><span class="line">PING bbs.ipad.jiangyd.com.cn (192.168.56.102) 56(84) bytes of data.</span><br><span class="line">64 bytes from bbs.jiangyd.cn (192.168.56.102): icmp_seq=1 ttl=64 time=0.019 ms</span><br><span class="line">64 bytes from bbs.jiangyd.cn (192.168.56.102): icmp_seq=2 ttl=64 time=0.030 ms</span><br><span class="line">^C</span><br><span class="line">--- bbs.ipad.jiangyd.com.cn ping statistics ---</span><br><span class="line">2 packets transmitted, 2 received, 0% packet loss, time 1001ms</span><br><span class="line">rtt min/avg/max/mdev = 0.019/0.024/0.030/0.007 ms</span><br><span class="line">root@jiangydpc:/etc/bind# ping 56789.ipad.jiangyd.com.cn</span><br><span class="line">PING 56789.ipad.jiangyd.com.cn (192.168.56.1) 56(84) bytes of data.</span><br><span class="line">64 bytes from music.jiangyd.cn (192.168.56.1): icmp_seq=1 ttl=64 time=0.343 ms</span><br><span class="line">64 bytes from music.jiangyd.cn (192.168.56.1): icmp_seq=2 ttl=64 time=0.306 ms</span><br><span class="line">^C</span><br><span class="line">--- 56789.ipad.jiangyd.com.cn ping statistics ---</span><br><span class="line">2 packets transmitted, 2 received, 0% packet loss, time 999ms</span><br><span class="line">rtt min/avg/max/mdev = 0.306/0.324/0.343/0.025 ms</span><br></pre></td></tr></table></figure><blockquote><p>查看日志<br>我的系统是ubuntu 14.04 </p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tailf /var/log/syslog</span><br></pre></td></tr></table></figure><blockquote><p>bind9 重启，停止，状态,及端口</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># /etc/init.d/bind9 status</span><br><span class="line"> * bind9 is running</span><br><span class="line">root@jiangydpc:/etc/bind# /etc/init.d/bind9 stop</span><br><span class="line"> * Stopping domain name service... bind9                                                                                                     waiting for pid 4039 to die</span><br><span class="line">                                                                                                                                      [ OK ]</span><br><span class="line">root@jiangydpc:/etc/bind# /etc/init.d/bind9 start</span><br><span class="line"> * Starting domain name service... bind9                                                                                              [ OK ]</span><br><span class="line">root@jiangydpc:/etc/bind# /etc/init.d/bind9 restart</span><br><span class="line"> * Stopping domain name service... bind9                                                                                              [ OK ]</span><br><span class="line"> * Starting domain name service... bind9                                                                                              [ OK ]</span><br><span class="line">root@jiangydpc:/etc/bind# netstat -lntp</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span><br><span class="line">tcp        0      0 192.168.56.102:53       0.0.0.0:*               LISTEN      4133/named</span><br><span class="line">tcp        0      0 10.100.3.52:53          0.0.0.0:*               LISTEN      4133/named</span><br><span class="line">tcp        0      0 127.0.0.1:53            0.0.0.0:*               LISTEN      4133/named</span><br><span class="line">tcp        0      0 127.0.0.1:953           0.0.0.0:*               LISTEN      4133/named</span><br><span class="line">tcp        0      0 127.0.0.1:8123          0.0.0.0:*               LISTEN      1229/polipo</span><br><span class="line">tcp        0      0 0.0.0.0:3333            0.0.0.0:*               LISTEN      1092/sshd</span><br><span class="line">tcp6       0      0 :::53                   :::*                    LISTEN      4133/named</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> dns </tag>
            
            <tag> bind9 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>docker cp</title>
      <link href="/2018/05/06/docker-cp/"/>
      <url>/2018/05/06/docker-cp/</url>
      <content type="html"><![CDATA[<h3 id="docker-cp-使用记录"><a href="#docker-cp-使用记录" class="headerlink" title="docker cp 使用记录"></a>docker cp 使用记录</h3><p>把容器里面的文件，目录拷贝到宿主机</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$docker cp 2f4f188c5d1c:/etc/nginx/conf.d/testing.www.cloudcare.cn.conf nginx_conf/</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$docker cp 2f4f188c5d1c:/etc/nginx/conf.d/ nginx_conf/</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> docker常用命令 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> cp </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>docker logs</title>
      <link href="/2018/05/06/docker-logs/"/>
      <url>/2018/05/06/docker-logs/</url>
      <content type="html"><![CDATA[<h3 id="docker-logs-使用记录"><a href="#docker-logs-使用记录" class="headerlink" title="docker logs 使用记录"></a>docker logs 使用记录</h3><p>最近常用到容器的这个命令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ docker logs --help</span><br><span class="line"></span><br><span class="line">Usage:docker logs [OPTIONS] CONTAINER</span><br><span class="line"></span><br><span class="line">Fetch the logs of a container</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">      --details        Show extra details provided to logs</span><br><span class="line">  -f, --follow         Follow log output</span><br><span class="line">      --help           Print usage</span><br><span class="line">      --since string   Show logs since timestamp</span><br><span class="line">      --tail string    Number of lines to show from the end of the logs (default &quot;all&quot;)</span><br><span class="line">  -t, --timestamps     Show timestamps</span><br></pre></td></tr></table></figure><p>实时查看日志<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker logs -f a13d7f1818d6</span><br></pre></td></tr></table></figure></p><p>查看日志产生的时间</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker logs -t  a13d7f1818d6</span><br><span class="line">2018-05-06T08:53:26.689471000Z INFO:callme.server:Server with id=&apos;cloudcare&apos; started.</span><br></pre></td></tr></table></figure><p>查看最后多少条日志</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f --tail=10 a13d7f1818d6</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> docker常用命令 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
