<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>搭建postfix邮件服务器</title>
      <link href="/2018/05/29/%E6%90%AD%E5%BB%BApostfix%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
      <url>/2018/05/29/%E6%90%AD%E5%BB%BApostfix%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
      <content type="html"><![CDATA[<blockquote><p>设置主机名为test.cn</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim /etc/hostname</span><br></pre></td></tr></table></figure><blockquote><p>查看主机名设置是否生效</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hostname</span><br><span class="line">test.cn</span><br></pre></td></tr></table></figure><blockquote><p>更新及安装</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install postfix</span><br></pre></td></tr></table></figure><img src="/2018/05/29/搭建postfix邮件服务器/mail_configuration.png" title="选择Internet Site"><img src="/2018/05/29/搭建postfix邮件服务器/mail_name.png" title="设置mail name"><blockquote><p>安装完成后监听端口</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -lntp|grep 25</span><br><span class="line">(No info could be read for &quot;-p&quot;: geteuid()=1000 but you should be root.)</span><br><span class="line">tcp        0      0 0.0.0.0:25              0.0.0.0:*               LISTEN      -</span><br><span class="line">tcp6       0      0 :::25                   :::*                    LISTEN      -</span><br></pre></td></tr></table></figure><blockquote><p>安装mail测试下</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install mailutils</span><br><span class="line">$ echo &quot;this is a test email&quot; |mail &quot;962584902@qq.com&quot;</span><br></pre></td></tr></table></figure><blockquote><p>看看日志是否正常</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ tailf /var/log/mail.log</span><br><span class="line">May 29 14:14:32 test postfix/pickup[2416]: E275A601B5: uid=1000 from=&lt;jiangyd@test.cn&gt;</span><br><span class="line">May 29 14:14:32 test postfix/cleanup[2938]: E275A601B5: message-id=&lt;20180529061432.E275A601B5@test.cn&gt;</span><br><span class="line">May 29 14:14:32 test postfix/qmgr[2417]: E275A601B5: from=&lt;jiangyd@test.cn&gt;, size=320, nrcpt=1 (queue active)</span><br><span class="line">May 29 14:14:33 test postfix/smtp[2940]: connect to mx3.qq.com[240e:ff:f040:28::f]:25: Network is unreachable</span><br><span class="line">May 29 14:14:34 test postfix/smtp[2940]: E275A601B5: to=&lt;962584902@qq.com&gt;, relay=mx3.qq.com[183.57.48.35]:25, delay=1.4, delays=0.02/0.01/0.17/1.2, dsn=2.0.0, status=sent (250 Ok: queued as )</span><br><span class="line">May 29 14:14:34 test postfix/qmgr[2417]: E275A601B5: removed</span><br></pre></td></tr></table></figure><blockquote><p>去qq邮箱看看</p></blockquote><img src="/2018/05/29/搭建postfix邮件服务器/mail_to_qq.png" title="验证"><blockquote><p>试试其它机器，连接邮件服务器来发邮件，并用python实现</p></blockquote><p>其它机器要能访问test.cn这个地址，可以本地绑定host</p><blockquote><p>python脚本</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># coding=utf-8</span><br><span class="line">__author__ = &apos;jyd&apos;</span><br><span class="line"></span><br><span class="line">import smtplib</span><br><span class="line"></span><br><span class="line">from email.mime.text import MIMEText</span><br><span class="line"></span><br><span class="line">smtpserver = &quot;test.cn&quot;</span><br><span class="line">username = &quot;jiangyd@test.cn&quot;</span><br><span class="line"></span><br><span class="line">msg = MIMEText(&quot;你好，这是一封测试邮件&quot;)</span><br><span class="line">msg[&apos;subject&apos;] = &quot;测试邮件&quot;</span><br><span class="line">msg[&apos;From&apos;] = &quot;jiangyd@test.cn&quot;</span><br><span class="line">msg[&apos;To&apos;] = &quot;962584902@qq.com&quot;</span><br><span class="line"></span><br><span class="line">smtp = smtplib.SMTP()</span><br><span class="line">smtp.connect(smtpserver)</span><br><span class="line">smtp.sendmail(msg[&apos;From&apos;], msg[&apos;To&apos;], msg.as_string())</span><br><span class="line">smtp.quit()</span><br></pre></td></tr></table></figure><blockquote><p>运行以上脚本报错了</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">    raise SMTPRecipientsRefused(senderrs)</span><br><span class="line">smtplib.SMTPRecipientsRefused: &#123;&apos;962584902@qq.com&apos;: (454, b&apos;4.7.1 &lt;962584902@qq.com&gt;: Relay access denied&apos;)&#125;</span><br></pre></td></tr></table></figure><blockquote><p>看看日志，发现是访问被拒绝了,不允许这个192.168.56.1<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ tailf /var/log/mail.log</span><br><span class="line">May 29 14:26:33 test postfix/smtpd[3171]: connect from unknown[192.168.56.1]</span><br><span class="line">May 29 14:26:33 test postfix/smtpd[3171]: NOQUEUE: reject: RCPT from unknown[192.168.56.1]: 454 4.7.1 &lt;962584902@qq.com&gt;: Relay access denied; from=&lt;jiangyd@test.cn&gt; to=&lt;962584902@qq.com&gt; proto=ESMTP helo=&lt;jiangyd.local&gt;</span><br><span class="line">May 29 14:26:33 test postfix/smtpd[3171]: lost connection after RSET from unknown[192.168.56.1]</span><br><span class="line">May 29 14:26:33 test postfix/smtpd[3171]: disconnect from unknown[192.168.56.1]</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>更改设置 增加可信客户端网段192.168.56.0/24,也可是增加万能的0.0.0.0/0</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim /etc/postfix/main.cf</span><br><span class="line">mynetworks = 127.0.0.0/8 [::ffff:127.0.0.0]/104 [::1]/128 192.168.56.0/24</span><br></pre></td></tr></table></figure><blockquote><p>更改后需要重启<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo /etc/init.d/postfix restart</span><br><span class="line">sudo: unable to resolve host test.cn</span><br><span class="line"> * Stopping Postfix Mail Transport Agent postfix                                     [ OK ]</span><br><span class="line"> * Starting Postfix Mail Transport Agent postfix                                     [ OK ]</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>再次验证<br><img src="/2018/05/29/搭建postfix邮件服务器/mail_to_qq_python.png" title="设置mail name"></p></blockquote>]]></content>
      
      
        <tags>
            
            <tag> postfix </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>mysql创建数据库,用户,及授权</title>
      <link href="/2018/05/28/mysql%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93-%E7%94%A8%E6%88%B7-%E5%8F%8A%E6%8E%88%E6%9D%83/"/>
      <url>/2018/05/28/mysql%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93-%E7%94%A8%E6%88%B7-%E5%8F%8A%E6%8E%88%E6%9D%83/</url>
      <content type="html"><![CDATA[<blockquote><p>创建数据库</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create database testdb default character set utf8 default collate utf8_general_ci;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br></pre></td></tr></table></figure><blockquote><p>创建用户</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create user &apos;jyd&apos;@&apos;%&apos; IDENTIFIED BY &apos;123456&apos;;</span><br><span class="line">Query OK, 0 rows affected (0.04 sec)</span><br></pre></td></tr></table></figure><blockquote><p>给用户授权</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; GRANT ALL PRIVILEGES ON testdb.* to &apos;jyd&apos;@&apos;%&apos;;</span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure><blockquote><p>更改用户密码</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SET PASSWORD FOR &apos;jyd&apos;@&apos;%&apos; = PASSWORD(&apos;new123456&apos;);</span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>记一次selenium 一打开浏览器就自动关闭了的问题</title>
      <link href="/2018/05/23/%E8%AE%B0%E4%B8%80%E6%AC%A1selenium-%E4%B8%80%E6%89%93%E5%BC%80%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B0%B1%E8%87%AA%E5%8A%A8%E5%85%B3%E9%97%AD%E4%BA%86%E7%9A%84%E9%97%AE%E9%A2%98-Only-local-connections-are-allowed/"/>
      <url>/2018/05/23/%E8%AE%B0%E4%B8%80%E6%AC%A1selenium-%E4%B8%80%E6%89%93%E5%BC%80%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B0%B1%E8%87%AA%E5%8A%A8%E5%85%B3%E9%97%AD%E4%BA%86%E7%9A%84%E9%97%AE%E9%A2%98-Only-local-connections-are-allowed/</url>
      <content type="html"><![CDATA[<p>selenium无法打开浏览器运行</p><p>1.chromedriver 版本与浏览器不匹配<br>2.如果是在本地调用， localhost需要指向127.0.0.1这个IP，不然也跑不起来(其实只是要host能指向正确的selenium driver的地址就行)</p><p><a href="https://npm.taobao.org/mirrors/chromedriver" target="_blank" rel="noopener">https://npm.taobao.org/mirrors/chromedriver</a></p><p><a href="https://npm.taobao.org/mirrors/selenium" target="_blank" rel="noopener">https://npm.taobao.org/mirrors/selenium</a></p>]]></content>
      
      
        <tags>
            
            <tag> selenium </tag>
            
            <tag> chromedriver </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>设置mysql最大连接数</title>
      <link href="/2018/05/21/%E8%AE%BE%E7%BD%AEmysql%E6%9C%80%E5%A4%A7%E8%BF%9E%E6%8E%A5%E6%95%B0/"/>
      <url>/2018/05/21/%E8%AE%BE%E7%BD%AEmysql%E6%9C%80%E5%A4%A7%E8%BF%9E%E6%8E%A5%E6%95%B0/</url>
      <content type="html"><![CDATA[<p>为什么要修改连接数，是因为默认的连接不满足需求，在硬件条件允许下，修改最大连接数达到满足需求的目的</p><blockquote><p>查看当前mysql最大连接数</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &apos;max_connections&apos;;</span><br><span class="line">+-----------------+-------+</span><br><span class="line">| Variable_name   | Value |</span><br><span class="line">+-----------------+-------+</span><br><span class="line">| max_connections | 1000  |</span><br><span class="line">+-----------------+-------+</span><br><span class="line">1 row in set (0.31 sec)</span><br></pre></td></tr></table></figure><blockquote><p>修改当前mysql最大连接数</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set global max_connections=1000;</span><br></pre></td></tr></table></figure><blockquote><p>但是以上的修改方式，在mysql服务重启后会失效</p></blockquote><blockquote><p>查看当前mysql连接</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SHOW PROCESSLIST;</span><br><span class="line">+-----+------+------------------+------+---------+------+----------+------------------+</span><br><span class="line">| Id  | User | Host             | db   | Command | Time | State    | Info             |</span><br><span class="line">+-----+------+------------------+------+---------+------+----------+------------------+</span><br><span class="line">|  66 | root | localhost        | NULL | Query   |    0 | starting | SHOW PROCESSLIST |</span><br><span class="line">| 331 | root | 172.17.0.1:54084 | csos | Sleep   |    9 |          | NULL             |</span><br><span class="line">| 332 | root | 172.17.0.1:54086 | csos | Sleep   |    8 |          | NULL             |</span><br><span class="line">| 333 | root | 172.17.0.1:54090 | csos | Sleep   |    9 |          | NULL             |</span><br><span class="line">| 334 | root | 172.17.0.1:54098 | csos | Sleep   |    9 |          | NULL             |</span><br><span class="line">| 335 | root | 172.17.0.1:54096 | csos | Sleep   |    9 |          | NULL             |</span><br><span class="line">| 336 | root | 172.17.0.1:54092 | csos | Sleep   |    8 |          | NULL             |</span><br><span class="line">| 337 | root | 172.17.0.1:54088 | csos | Sleep   |    9 |          | NULL             |</span><br><span class="line">| 338 | root | 172.17.0.1:54094 | csos | Sleep   |    9 |          | NULL             |</span><br><span class="line">| 339 | root | 172.17.0.1:54100 | csos | Sleep   |    9 |          | NULL             |</span><br><span class="line">| 340 | root | 172.17.0.1:54116 | csos | Sleep   |    8 |          | NULL             |</span><br><span class="line">| 341 | root | 172.17.0.1:54104 | csos | Sleep   |    8 |          | NULL             |</span><br><span class="line">| 342 | root | 172.17.0.1:54120 | csos | Sleep   |    9 |          | NULL             |</span><br><span class="line">| 343 | root | 172.17.0.1:54106 | csos | Sleep   |    9 |          | NULL             |</span><br><span class="line">| 344 | root | 172.17.0.1:54122 | csos | Sleep   |    8 |          | NULL             |</span><br><span class="line">| 345 | root | 172.17.0.1:54108 | csos | Sleep   |    8 |          | NULL             |</span><br><span class="line">| 346 | root | 172.17.0.1:54110 | csos | Sleep   |    8 |          | NULL             |</span><br><span class="line">| 347 | root | 172.17.0.1:54112 | csos | Sleep   |    9 |          | NULL             |</span><br><span class="line">| 348 | root | 172.17.0.1:54102 | csos | Sleep   |    8 |          | NULL             |</span><br><span class="line">| 349 | root | 172.17.0.1:54114 | csos | Sleep   |    8 |          | NULL             |</span><br><span class="line">| 350 | root | 172.17.0.1:54118 | csos | Sleep   |    8 |          | NULL             |</span><br><span class="line">+-----+------+------------------+------+---------+------+----------+------------------+</span><br><span class="line">21 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><blockquote><p>如果查看连接数需要过滤的话，可以如下操作</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from information_schema.PROCESSLIST where db=&apos;csos&apos;;</span><br><span class="line">+-----+------+------------------+------+---------+------+-------+------+</span><br><span class="line">| ID  | USER | HOST             | DB   | COMMAND | TIME | STATE | INFO |</span><br><span class="line">+-----+------+------------------+------+---------+------+-------+------+</span><br><span class="line">| 354 | root | 172.17.0.1:54130 | csos | Sleep   |    4 |       | NULL |</span><br><span class="line">| 355 | root | 172.17.0.1:54132 | csos | Sleep   |    4 |       | NULL |</span><br><span class="line">+-----+------+------------------+------+---------+------+-------+------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>时间不对，通过ntpdate同步时间</title>
      <link href="/2018/05/21/%E6%97%B6%E9%97%B4%E4%B8%8D%E5%AF%B9%EF%BC%8C%E9%80%9A%E8%BF%87ntpdate%E5%90%8C%E6%AD%A5%E6%97%B6%E9%97%B4/"/>
      <url>/2018/05/21/%E6%97%B6%E9%97%B4%E4%B8%8D%E5%AF%B9%EF%BC%8C%E9%80%9A%E8%BF%87ntpdate%E5%90%8C%E6%AD%A5%E6%97%B6%E9%97%B4/</url>
      <content type="html"><![CDATA[<blockquote><p>我有一台虚拟机，时间不对，影响我使用,使用阿里云公网NTP服务同步时间</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ntpdate ntp1.aliyun.com</span><br><span class="line">21 May 12:50:42 ntpdate[6794]: step time server 182.92.12.11 offset 0.548418 sec</span><br></pre></td></tr></table></figure><p>其它阿里云公网NTP时间服务器</p><h2 id="公网NTP"><a href="#公网NTP" class="headerlink" title="公网NTP "></a>公网NTP </h2><p>ntp2.aliyun.com<br>ntp3.aliyun.com<br>ntp4.aliyun.com<br>ntp5.aliyun.com<br>ntp6.aliyun.com<br>ntp7.aliyun.com</p>]]></content>
      
      
        <tags>
            
            <tag> 时间同步 </tag>
            
            <tag> ntpdate </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>通过ssh config配置, 使git用不同私钥提交代码</title>
      <link href="/2018/05/15/%E9%80%9A%E8%BF%87ssh-config%E9%85%8D%E7%BD%AE-%E4%BD%BFgit%E7%94%A8%E4%B8%8D%E5%90%8C%E7%A7%81%E9%92%A5%E6%8F%90%E4%BA%A4%E4%BB%A3%E7%A0%81/"/>
      <url>/2018/05/15/%E9%80%9A%E8%BF%87ssh-config%E9%85%8D%E7%BD%AE-%E4%BD%BFgit%E7%94%A8%E4%B8%8D%E5%90%8C%E7%A7%81%E9%92%A5%E6%8F%90%E4%BA%A4%E4%BB%A3%E7%A0%81/</url>
      <content type="html"><![CDATA[<p>我有在用hexo部署blog在github上，本地构建完成后，直接可以把编译后的文件部署上去</p><p>但是，我希望源文件也可以存放在github上，所以我又搞了一个仓库地址</p><p>但是在当前目录提交代码时，只能提交一个，另一个提交不了，因为默认使用的私钥文件不对</p><p>为了区分开来，我只能配置不同的私钥文件,可以参考下我的配置文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ touch ~/.ssh/config</span><br><span class="line">$ vim ~/.ssh/config</span><br><span class="line"></span><br><span class="line">HOST server1</span><br><span class="line"> HOSTNAME 192.168.56.102</span><br><span class="line"> User jiangyd</span><br><span class="line"> Port 3333</span><br><span class="line"></span><br><span class="line">HOST gitblog.com</span><br><span class="line">  HOSTNAME github.com</span><br><span class="line">  IdentityFile ~/.ssh/id_rsa</span><br><span class="line"></span><br><span class="line">HOST github.com</span><br><span class="line">  HOSTNAME github.com</span><br><span class="line">  IdentityFile ~/.ssh/github.com</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>HOST</td><td>别名    </td></tr><tr><td>HOSTNAME</td><td>主机</td></tr><tr><td>User</td><td>用户名</td></tr><tr><td>Port</td><td>端口</td></tr><tr><td>IdentityFile</td><td>私钥文件   </td></tr></tbody></table><blockquote><p>连接例子</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ssh server1</span><br><span class="line">jiangyd@192.168.56.102&apos;s password:</span><br></pre></td></tr></table></figure><blockquote><p>我的hexo _config.yml github仓库配置，注意这里用别名</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: git@gitblog.com:jiangyd/jiangyd.github.io</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><blockquote><p>这样我就可以在hexo blog项目里面，即可以提交源代码到Github，又可以提交构建部署的代码到Github<br>因为部署的github与源代码仓库地址不是一个</p></blockquote><p>以上的配置都是太过复杂，为什么会出现这种情况，是因为我把自已电脑的公钥存放到Github项目<br>里面了，而不同项目又不能存放同一个公钥，所以才会有我上面的这些设置</p><p>那么只要把公钥在Github上面做全局的设置，那么我本地就不用搞这么复杂了</p>]]></content>
      
      
        <tags>
            
            <tag> ssh </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>容器与宿主机时区不一致问题</title>
      <link href="/2018/05/09/%E5%AE%B9%E5%99%A8%E4%B8%8E%E5%AE%BF%E4%B8%BB%E6%9C%BA%E6%97%B6%E5%8C%BA%E4%B8%8D%E4%B8%80%E8%87%B4%E9%97%AE%E9%A2%98/"/>
      <url>/2018/05/09/%E5%AE%B9%E5%99%A8%E4%B8%8E%E5%AE%BF%E4%B8%BB%E6%9C%BA%E6%97%B6%E5%8C%BA%E4%B8%8D%E4%B8%80%E8%87%B4%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<h4 id="docker-容器时区与宿主机时区保持一致"><a href="#docker-容器时区与宿主机时区保持一致" class="headerlink" title="docker 容器时区与宿主机时区保持一致"></a>docker 容器时区与宿主机时区保持一致</h4><blockquote><p>方法1 共享宿主机的local time</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -v /etc/localtime:/etc/localtime -v /etc/timezone:/etc/timezone ubuntu:16.04 /bin/bash</span><br></pre></td></tr></table></figure><blockquote><p>方法2 在dockerfile中定义</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">RUN /bin/cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \</span><br><span class="line">  &amp;&amp; echo &apos;Asia/Shanghai&apos; &gt;/etc/timezone \</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line">RUN /bin/cp /etc/localtime /etc/localtime \</span><br><span class="line">  &amp;&amp; echo &apos;Asia/Shanghai&apos; &gt;/etc/timezone \</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> 挂载 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ubuntu apt使用阿里源</title>
      <link href="/2018/05/09/ubuntu-apt%E4%BD%BF%E7%94%A8%E9%98%BF%E9%87%8C%E6%BA%90/"/>
      <url>/2018/05/09/ubuntu-apt%E4%BD%BF%E7%94%A8%E9%98%BF%E9%87%8C%E6%BA%90/</url>
      <content type="html"><![CDATA[<h4 id="ubuntu-14-04使用阿里的软件源"><a href="#ubuntu-14-04使用阿里的软件源" class="headerlink" title="ubuntu 14.04使用阿里的软件源"></a>ubuntu 14.04使用阿里的软件源</h4><blockquote><p>备份</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># cp /etc/apt/sources.list /etc/apt/sources.list.bak</span><br></pre></td></tr></table></figure><blockquote><p>替换</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">cat &gt;/etc/apt/sources.list&lt;&lt;EOF</span><br><span class="line">deb https://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse</span><br><span class="line">deb https://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb https://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb https://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">## Not recommended</span><br><span class="line"># deb https://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse</span><br><span class="line"># deb-src https://mirrors.aliyun.com/ubuntu/ trusty-proposed main restricted universe multiverse</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><blockquote><p>最后执行apt更新</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># apt-get update</span><br></pre></td></tr></table></figure><blockquote><p>其它系统参考此地址</p></blockquote><p><a href="https://opsx.alibaba.com/mirror" target="_blank" rel="noopener">https://opsx.alibaba.com/mirror</a></p>]]></content>
      
      
        <tags>
            
            <tag> apt </tag>
            
            <tag> apt-get </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Linux下使用sed替换dns地址</title>
      <link href="/2018/05/09/Linux%E4%B8%8B%E4%BD%BF%E7%94%A8sed%E6%9B%BF%E6%8D%A2dns%E5%9C%B0%E5%9D%80/"/>
      <url>/2018/05/09/Linux%E4%B8%8B%E4%BD%BF%E7%94%A8sed%E6%9B%BF%E6%8D%A2dns%E5%9C%B0%E5%9D%80/</url>
      <content type="html"><![CDATA[<h4 id="sed替换-etc-resolv-conf文件的dns地址"><a href="#sed替换-etc-resolv-conf文件的dns地址" class="headerlink" title="sed替换/etc/resolv.conf文件的dns地址"></a>sed替换/etc/resolv.conf文件的dns地址</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># cat /etc/resolv.conf</span><br><span class="line">nameserver 114.114.114.114</span><br><span class="line">nameserver 8.8.8.8</span><br><span class="line"></span><br><span class="line"># sed -i &apos;s/[0-9]\&#123;1,3\&#125;\.[0-9]\&#123;1,3\&#125;\.[0-9]\&#123;1,3\&#125;\.[0-9]\&#123;1,3\&#125;/172.16.0.244/g&apos; /etc/resolv.conf</span><br><span class="line"></span><br><span class="line"># cat /etc/resolv.conf</span><br><span class="line">nameserver 172.16.0.244</span><br><span class="line">nameserver 172.16.0.244</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> － sed </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ubuntu使用bind9搭建DNS</title>
      <link href="/2018/05/07/ubuntu%E4%BD%BF%E7%94%A8bind9%E6%90%AD%E5%BB%BADNS/"/>
      <url>/2018/05/07/ubuntu%E4%BD%BF%E7%94%A8bind9%E6%90%AD%E5%BB%BADNS/</url>
      <content type="html"><![CDATA[<h4 id="安装bind9"><a href="#安装bind9" class="headerlink" title="安装bind9"></a>安装bind9</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install bind9</span><br></pre></td></tr></table></figure><h4 id="默认配置文件路径"><a href="#默认配置文件路径" class="headerlink" title="默认配置文件路径"></a>默认配置文件路径</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pwd</span><br><span class="line">/etc/bind</span><br></pre></td></tr></table></figure><h4 id="添加域名正反向解析配置"><a href="#添加域名正反向解析配置" class="headerlink" title="添加域名正反向解析配置"></a>添加域名正反向解析配置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim named.conf.default-zones</span><br><span class="line"></span><br><span class="line">zone &quot;jiangyd.cn&quot; &#123;</span><br><span class="line">        type master;</span><br><span class="line">        file &quot;/etc/bind/db.jiangyd.cn&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">zone &quot;56.168.192.in-addr.arpa&quot; &#123;</span><br><span class="line">type master;</span><br><span class="line">file &quot;/etc/bind/192.168.56.zone&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">zone &quot;ipad.jiangyd.com.cn&quot; &#123;</span><br><span class="line">type master;</span><br><span class="line">file &quot;/etc/bind/ipad.jiangyd.com.cn&quot;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>正向解析</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># cat db.jiangyd.cn</span><br><span class="line">;</span><br><span class="line">; BIND data file for local loopback interface</span><br><span class="line">;</span><br><span class="line">$TTL604800</span><br><span class="line">@INSOAjiangyd.cn. root.localhost. (</span><br><span class="line">      2; Serial</span><br><span class="line"> 604800; Refresh</span><br><span class="line">  86400; Retry</span><br><span class="line">2419200; Expire</span><br><span class="line"> 604800 ); Negative Cache TTL</span><br><span class="line">;</span><br><span class="line">@INNSjiangyd.cn.</span><br><span class="line">@INA127.0.0.1</span><br><span class="line">@INAAAA::1</span><br><span class="line"></span><br><span class="line">www     IN      A      192.168.56.102</span><br><span class="line">bbs     IN      A      192.168.56.102</span><br><span class="line">music   IN      A      192.168.56.1</span><br></pre></td></tr></table></figure><blockquote><p>反向解析</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># cat 192.168.56.zone</span><br><span class="line">;</span><br><span class="line">; BIND reverse data file for local loopback interface</span><br><span class="line">;</span><br><span class="line">$TTL604800</span><br><span class="line">@INSOAjiangyd.cn. root.localhost. (</span><br><span class="line">      1; Serial</span><br><span class="line"> 604800; Refresh</span><br><span class="line">  86400; Retry</span><br><span class="line">2419200; Expire</span><br><span class="line"> 604800 ); Negative Cache TTL</span><br><span class="line">;</span><br><span class="line">@INNS     jiangyd.cn.</span><br><span class="line">102     IN      PTR    www.jiangyd.cn.</span><br><span class="line">102     IN      PTR    bbs.jiangyd.cn.</span><br><span class="line">1       IN      PTR    music.jiangyd.cn.</span><br></pre></td></tr></table></figure><blockquote><p>有的应用需要为不同用户分配不同域名，试试泛解析</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># cat ipad.jiangyd.com.cn</span><br><span class="line">;</span><br><span class="line">; BIND data file for local loopback interface</span><br><span class="line">;</span><br><span class="line">$TTL604800</span><br><span class="line">@INSOAipad.jiangyd.com.cn. root.localhost. (</span><br><span class="line">      2; Serial</span><br><span class="line"> 604800; Refresh</span><br><span class="line">  86400; Retry</span><br><span class="line">2419200; Expire</span><br><span class="line"> 604800 ); Negative Cache TTL</span><br><span class="line">;</span><br><span class="line">@INNSipad.jiangyd.com.cn.</span><br><span class="line">@INA127.0.0.1</span><br><span class="line">@INAAAA::1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">www  IN  A  192.168.56.1</span><br><span class="line">bbs  IN  A  192.168.56.102</span><br><span class="line">*    IN  A  192.168.56.1</span><br></pre></td></tr></table></figure><blockquote><p>正反向解析测试</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">root@jiangydpc:/etc/bind# ping www.jiangyd.cn</span><br><span class="line">PING www.jiangyd.cn (192.168.56.102) 56(84) bytes of data.</span><br><span class="line">64 bytes from dns.jiangyd.cn (192.168.56.102): icmp_seq=1 ttl=64 time=0.069 ms</span><br><span class="line">64 bytes from dns.jiangyd.cn (192.168.56.102): icmp_seq=2 ttl=64 time=0.026 ms</span><br><span class="line">^C</span><br><span class="line">--- www.jiangyd.cn ping statistics ---</span><br><span class="line">2 packets transmitted, 2 received, 0% packet loss, time 999ms</span><br><span class="line">rtt min/avg/max/mdev = 0.026/0.047/0.069/0.022 ms</span><br><span class="line">root@jiangydpc:/etc/bind# ping bbs.jiangyd.cn</span><br><span class="line">PING bbs.jiangyd.cn (192.168.56.102) 56(84) bytes of data.</span><br><span class="line">64 bytes from www.jiangyd.cn (192.168.56.102): icmp_seq=1 ttl=64 time=0.010 ms</span><br><span class="line">64 bytes from www.jiangyd.cn (192.168.56.102): icmp_seq=2 ttl=64 time=0.023 ms</span><br><span class="line">^C</span><br><span class="line">--- bbs.jiangyd.cn ping statistics ---</span><br><span class="line">2 packets transmitted, 2 received, 0% packet loss, time 999ms</span><br><span class="line">rtt min/avg/max/mdev = 0.010/0.016/0.023/0.007 ms</span><br><span class="line">root@jiangydpc:/etc/bind# ping music.jiangyd.cn</span><br><span class="line">PING music.jiangyd.cn (192.168.56.1) 56(84) bytes of data.</span><br><span class="line">64 bytes from music.jiangyd.cn (192.168.56.1): icmp_seq=1 ttl=64 time=0.277 ms</span><br><span class="line">64 bytes from music.jiangyd.cn (192.168.56.1): icmp_seq=2 ttl=64 time=0.355 ms</span><br><span class="line">64 bytes from music.jiangyd.cn (192.168.56.1): icmp_seq=3 ttl=64 time=0.203 ms</span><br><span class="line">^C</span><br><span class="line">--- music.jiangyd.cn ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 1999ms</span><br><span class="line">rtt min/avg/max/mdev = 0.203/0.278/0.355/0.063 ms</span><br><span class="line">root@jiangydpc:/etc/bind# host -t PTR 192.168.56.1</span><br><span class="line">1.56.168.192.in-addr.arpa domain name pointer music.jiangyd.cn.</span><br><span class="line">root@jiangydpc:/etc/bind# host -t PTR 192.168.56.102</span><br><span class="line">102.56.168.192.in-addr.arpa domain name pointer dns.jiangyd.cn.</span><br><span class="line">102.56.168.192.in-addr.arpa domain name pointer www.jiangyd.cn.</span><br><span class="line">102.56.168.192.in-addr.arpa domain name pointer bbs.jiangyd.cn.</span><br></pre></td></tr></table></figure><blockquote><p>泛解析,前面域名可以随便填写了</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">root@jiangydpc:/etc/bind# ping wqewweq.ipad.jiangyd.com.cn</span><br><span class="line">PING wqewweq.ipad.jiangyd.com.cn (192.168.56.1) 56(84) bytes of data.</span><br><span class="line">64 bytes from music.jiangyd.cn (192.168.56.1): icmp_seq=1 ttl=64 time=0.295 ms</span><br><span class="line">64 bytes from music.jiangyd.cn (192.168.56.1): icmp_seq=2 ttl=64 time=0.358 ms</span><br><span class="line">64 bytes from music.jiangyd.cn (192.168.56.1): icmp_seq=3 ttl=64 time=0.246 ms</span><br><span class="line">^C</span><br><span class="line">--- wqewweq.ipad.jiangyd.com.cn ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 2000ms</span><br><span class="line">rtt min/avg/max/mdev = 0.246/0.299/0.358/0.050 ms</span><br><span class="line">root@jiangydpc:/etc/bind# ping www.ipad.jiangyd.com.cn</span><br><span class="line">PING www.ipad.jiangyd.com.cn (192.168.56.1) 56(84) bytes of data.</span><br><span class="line">64 bytes from music.jiangyd.cn (192.168.56.1): icmp_seq=1 ttl=64 time=0.194 ms</span><br><span class="line">64 bytes from music.jiangyd.cn (192.168.56.1): icmp_seq=2 ttl=64 time=0.289 ms</span><br><span class="line">^C</span><br><span class="line">--- www.ipad.jiangyd.com.cn ping statistics ---</span><br><span class="line">2 packets transmitted, 2 received, 0% packet loss, time 1002ms</span><br><span class="line">rtt min/avg/max/mdev = 0.194/0.241/0.289/0.049 ms</span><br><span class="line">root@jiangydpc:/etc/bind# ping bbs.ipad.jiangyd.com.cn</span><br><span class="line">PING bbs.ipad.jiangyd.com.cn (192.168.56.102) 56(84) bytes of data.</span><br><span class="line">64 bytes from bbs.jiangyd.cn (192.168.56.102): icmp_seq=1 ttl=64 time=0.019 ms</span><br><span class="line">64 bytes from bbs.jiangyd.cn (192.168.56.102): icmp_seq=2 ttl=64 time=0.030 ms</span><br><span class="line">^C</span><br><span class="line">--- bbs.ipad.jiangyd.com.cn ping statistics ---</span><br><span class="line">2 packets transmitted, 2 received, 0% packet loss, time 1001ms</span><br><span class="line">rtt min/avg/max/mdev = 0.019/0.024/0.030/0.007 ms</span><br><span class="line">root@jiangydpc:/etc/bind# ping 56789.ipad.jiangyd.com.cn</span><br><span class="line">PING 56789.ipad.jiangyd.com.cn (192.168.56.1) 56(84) bytes of data.</span><br><span class="line">64 bytes from music.jiangyd.cn (192.168.56.1): icmp_seq=1 ttl=64 time=0.343 ms</span><br><span class="line">64 bytes from music.jiangyd.cn (192.168.56.1): icmp_seq=2 ttl=64 time=0.306 ms</span><br><span class="line">^C</span><br><span class="line">--- 56789.ipad.jiangyd.com.cn ping statistics ---</span><br><span class="line">2 packets transmitted, 2 received, 0% packet loss, time 999ms</span><br><span class="line">rtt min/avg/max/mdev = 0.306/0.324/0.343/0.025 ms</span><br></pre></td></tr></table></figure><blockquote><p>查看日志<br>我的系统是ubuntu 14.04 </p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tailf /var/log/syslog</span><br></pre></td></tr></table></figure><blockquote><p>bind9 重启，停止，状态,及端口</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># /etc/init.d/bind9 status</span><br><span class="line"> * bind9 is running</span><br><span class="line">root@jiangydpc:/etc/bind# /etc/init.d/bind9 stop</span><br><span class="line"> * Stopping domain name service... bind9                                                                                                     waiting for pid 4039 to die</span><br><span class="line">                                                                                                                                      [ OK ]</span><br><span class="line">root@jiangydpc:/etc/bind# /etc/init.d/bind9 start</span><br><span class="line"> * Starting domain name service... bind9                                                                                              [ OK ]</span><br><span class="line">root@jiangydpc:/etc/bind# /etc/init.d/bind9 restart</span><br><span class="line"> * Stopping domain name service... bind9                                                                                              [ OK ]</span><br><span class="line"> * Starting domain name service... bind9                                                                                              [ OK ]</span><br><span class="line">root@jiangydpc:/etc/bind# netstat -lntp</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span><br><span class="line">tcp        0      0 192.168.56.102:53       0.0.0.0:*               LISTEN      4133/named</span><br><span class="line">tcp        0      0 10.100.3.52:53          0.0.0.0:*               LISTEN      4133/named</span><br><span class="line">tcp        0      0 127.0.0.1:53            0.0.0.0:*               LISTEN      4133/named</span><br><span class="line">tcp        0      0 127.0.0.1:953           0.0.0.0:*               LISTEN      4133/named</span><br><span class="line">tcp        0      0 127.0.0.1:8123          0.0.0.0:*               LISTEN      1229/polipo</span><br><span class="line">tcp        0      0 0.0.0.0:3333            0.0.0.0:*               LISTEN      1092/sshd</span><br><span class="line">tcp6       0      0 :::53                   :::*                    LISTEN      4133/named</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> dns </tag>
            
            <tag> bind9 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>docker cp</title>
      <link href="/2018/05/06/docker-cp/"/>
      <url>/2018/05/06/docker-cp/</url>
      <content type="html"><![CDATA[<h3 id="docker-cp-使用记录"><a href="#docker-cp-使用记录" class="headerlink" title="docker cp 使用记录"></a>docker cp 使用记录</h3><p>把容器里面的文件，目录拷贝到宿主机</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$docker cp 2f4f188c5d1c:/etc/nginx/conf.d/testing.www.cloudcare.cn.conf nginx_conf/</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$docker cp 2f4f188c5d1c:/etc/nginx/conf.d/ nginx_conf/</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> docker常用命令 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> cp </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>docker logs</title>
      <link href="/2018/05/06/docker-logs/"/>
      <url>/2018/05/06/docker-logs/</url>
      <content type="html"><![CDATA[<h3 id="docker-logs-使用记录"><a href="#docker-logs-使用记录" class="headerlink" title="docker logs 使用记录"></a>docker logs 使用记录</h3><p>最近常用到容器的这个命令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ docker logs --help</span><br><span class="line"></span><br><span class="line">Usage:docker logs [OPTIONS] CONTAINER</span><br><span class="line"></span><br><span class="line">Fetch the logs of a container</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">      --details        Show extra details provided to logs</span><br><span class="line">  -f, --follow         Follow log output</span><br><span class="line">      --help           Print usage</span><br><span class="line">      --since string   Show logs since timestamp</span><br><span class="line">      --tail string    Number of lines to show from the end of the logs (default &quot;all&quot;)</span><br><span class="line">  -t, --timestamps     Show timestamps</span><br></pre></td></tr></table></figure><p>实时查看日志<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker logs -f a13d7f1818d6</span><br></pre></td></tr></table></figure></p><p>查看日志产生的时间</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker logs -t  a13d7f1818d6</span><br><span class="line">2018-05-06T08:53:26.689471000Z INFO:callme.server:Server with id=&apos;cloudcare&apos; started.</span><br></pre></td></tr></table></figure><p>查看最后多少条日志</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f --tail=10 a13d7f1818d6</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> docker常用命令 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
